{"version":3,"mappings":"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","names":["supabaseUrl","__vite_import_meta_env__","supabaseAnonKey","supabase","createClient","AuthContext","createContext","AuthProvider","children","user","setUser","useState","session","setSession","loading","setLoading","useEffect","authListener","_event","value","provider","email","password","error","useAuth","context","useContext","AudioEngineContext","AudioEngineProvider","audioRef","useRef","rafId","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","startRaf","useCallback","loop","a","stopRaf","handleLoadedMeta","handleDurationChange","handleEnded","handlePlay","handlePause","handleError","play","err","pause","stop","setVolumeLevel","newVolume","v","loadAudio","audioUrl","seekTo","time","d","t","useMemo","jsx","useAudioEngine","cn","inputs","twMerge","clsx","buttonVariants","cva","Button","className","variant","size","asChild","props","Comp","Slot","badgeVariants","Badge","Avatar","AvatarPrimitive.Root","AvatarImage","AvatarPrimitive.Image","AvatarFallback","AvatarPrimitive.Fallback","Header","onShowSubscription","signOut","jsxs","Brain","Zap","Settings","_a","User","_b","LogOut","HapticButton","hapticType","onClick","triggerHaptic","handleClick","e","Slider","defaultValue","min","max","_values","React.useMemo","SliderPrimitive.Root","SliderPrimitive.Track","SliderPrimitive.Range","_","index","SliderPrimitive.Thumb","HapticSlider","onValueChange","handleValueChange","Card","CardHeader","CardTitle","CardContent","Progress","ProgressPrimitive.Root","ProgressPrimitive.Indicator","ChordCraftDecoder","code","metaMatch","meta","chordsMatch","chords","audioMatch","audio","audioStr","formatMatch","srMatch","channelsMatch","shaMatch","chunksMatch","chunkSizeMatch","neuralMatch","neural","neuralStr","modelMatch","tokensMatch","compressionMatch","flacData","neuralTokens","chunks","i","match","b64Data","binaryString","bytes","hashBuffer","b","song","audioBuffer","source","createFFmpeg","fetchFile","__vitePreload","n","ffmpeg","wavU8","tokens","sampleRate","buffer","channelData","tokenIndex","token","frequency","hash","lossless","total","chordCraftDecoder","SimpleFileUpload","onUpload","isDragging","setIsDragging","isUploading","setIsUploading","uploadProgress","setUploadProgress","checksumStatus","setChecksumStatus","fileInputRef","backendUrl","validFile","f","handleDragOver","handleDragLeave","handleDrop","files","handleFileUpload","handleFileSelect","handleFileChange","file","fd","url","xhr","resolve","reject","ev","body","strategy","checksum","uploadResult","motion","AnimatePresence","Loader2","FileAudio","Upload","Fragment","CheckCircle","AlertTriangle","Music","ScrollArea","React.forwardRef","ref","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","orientation","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","LeftPanel","currentTrack","setCurrentTrack","tracks","setTracks","result","newTrack","toggleMute","trackId","track","toggleSolo","updateVolume","VolumeX","Volume2","EnhancedTransportControls","onPlayPause","onStop","onNext","onPrevious","totalTime","zoom","onZoomChange","isRecording","setIsRecording","showBeatPulse","setShowBeatPulse","interval","formatTime","seconds","mins","secs","SkipBack","Pause","Play","Square","SkipForward","Clock","ProfessionalPianoRoll","notes","onNoteClick","onNoteMove","onNoteResize","draggedNote","setDraggedNote","resizingNote","setResizingNote","dragOffset","setDragOffset","gridRef","allNotes","noteIndex","note","isSharpNote","handleTouchStart","touch","rect","handleMouseDown","handlePointerMove","gridRect","relativeX","relativeY","timePerPixel","newStart","noteHeight","newNote","handlePointerUp","gridWidth","pixelsPerSecond","isBarLine","isBeatLine","noteIdx","top","left","width","height","MainPanel","audioEngine","setZoom","playbackState","setPlaybackState","safeAudioEngine","generateSampleAudio","audioContext","oscillator","gainNode","mockNotes","handlePlayPause","newPlaybackState","handleStop","handleNext","handlePrevious","noteId","newDuration","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","Input","type","AICompanion","messages","setMessages","inputValue","setInputValue","isThinking","setIsThinking","scrollAreaRef","viewport","handleSendMessage","userMessage","prev","aiResponses","response","aiMessage","handleKeyPress","Sparkles","message","Send","CodeEditor","locked","Lock","Copy","Download","MusicAnalysis","analysisData","BarChart3","TrendingUp","chord","scale","RightPanel","activeTab","setActiveTab","Code","Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","XIcon","DialogHeader","DialogTitle","DialogPrimitive.Title","SubscriptionModal","open","onOpenChange","proFeatures","handleUpgrade","Crown","X","feature","Check","LandingPage","onEnterStudio","currentFeature","setCurrentFeature","isDAWPreviewVisible","setIsDAWPreviewVisible","heroRef","featuresRef","testimonialsRef","ctaFunnelRef","scrollY","useScroll","backgroundY","useTransform","heroOpacity","useInView","isFeaturesInView","isTestimonialsInView","isCTAInView","features","Activity","testimonials","ctaSteps","ArrowRight","ChevronDown","testimonial","Quote","Star","step","Label","LabelPrimitive.Root","Separator","decorative","SeparatorPrimitive.Root","Login","onBack","signInWithEmail","signInWithOAuth","isSignUp","setIsSignUp","setEmail","setPassword","setError","handleSubmit","handleGoogleSignIn","handleGitHubSignIn","ArrowLeft","Mail","Github","ResponsiveLayout","header","leftPanel","mainPanel","rightPanel","isMobile","setIsMobile","leftPanelOpen","setLeftPanelOpen","rightPanelOpen","setRightPanelOpen","checkDevice","Menu","AppContent","currentView","setCurrentView","showSubscriptionModal","setShowSubscriptionModal","App","Analytics","createRoot"],"ignoreList":[],"sources":["../../src/components/Auth.tsx","../../src/services/AudioEngine.tsx","../../src/components/ui/utils.ts","../../src/components/ui/button.tsx","../../src/components/ui/badge.tsx","../../src/components/ui/avatar.tsx","../../src/components/Header.tsx","../../src/components/HapticButton.tsx","../../src/components/ui/slider.tsx","../../src/components/HapticSlider.tsx","../../src/components/ui/card.tsx","../../src/components/ui/progress.tsx","../../src/utils/ChordCraftDecoder.ts","../../src/components/SimpleFileUpload.tsx","../../src/components/ui/scroll-area.tsx","../../src/components/LeftPanel.tsx","../../src/components/EnhancedTransportControls.tsx","../../src/components/ProfessionalPianoRoll.tsx","../../src/components/MainPanel.tsx","../../src/components/ui/tabs.tsx","../../src/components/ui/input.tsx","../../src/components/AICompanion.tsx","../../src/components/CodeEditor.tsx","../../src/components/MusicAnalysis.tsx","../../src/components/RightPanel.tsx","../../src/components/ui/dialog.tsx","../../src/components/SubscriptionModal.tsx","../../src/components/LandingPage.tsx","../../src/components/ui/label.tsx","../../src/components/ui/separator.tsx","../../src/components/Login.tsx","../../src/components/ResponsiveLayout.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { createClient, User, Session } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = (import.meta as any).env?.VITE_SUPABASE_URL || 'https://wgofqkisiqkygpnliuwl.supabase.co';\r\nconst supabaseAnonKey = (import.meta as any).env?.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indnb2Zxa2lzaXFreWdwbmxpdXdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4ODE4MzEsImV4cCI6MjA3MzQ1NzgzMX0.DcqJ7XNAkMiOT-3Vnlmvua84wNqahgfd3JQ9wpTW-yg';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  session: Session | null;\r\n  loading: boolean;\r\n  signInWithOAuth: (provider: 'google' | 'github') => Promise<void>;\r\n  signInWithEmail: (email: string, password: string) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user || null);\r\n      setLoading(false);\r\n    });\r\n\r\n    const { data: authListener } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setSession(session);\r\n      setUser(session?.user || null);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => {\r\n      authListener.subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const signInWithOAuth = async (provider: 'google' | 'github') => {\r\n    await supabase.auth.signInWithOAuth({ \r\n      provider,\r\n      options: {\r\n        redirectTo: `${window.location.origin}`,\r\n      },\r\n    });\r\n  };\r\n\r\n  const signInWithEmail = async (email: string, password: string) => {\r\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n    if (error) throw error;\r\n  };\r\n\r\n  const signOut = async () => {\r\n    await supabase.auth.signOut();\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    session,\r\n    loading,\r\n    signInWithOAuth,\r\n    signInWithEmail,\r\n    signOut,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n","\"use client\";\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\n\r\ninterface AudioEngineContextType {\r\n  isPlaying: boolean;\r\n  currentTime: number;\r\n  duration: number;\r\n  volume: number;\r\n  play: () => void;\r\n  pause: () => void;\r\n  stop: () => void;\r\n  setVolume: (volume: number) => void;\r\n  loadAudio: (audioUrl: string) => void;\r\n  seekTo: (time: number) => void;\r\n}\r\n\r\nconst AudioEngineContext = createContext<AudioEngineContextType | undefined>(\r\n  undefined\r\n);\r\n\r\nexport function AudioEngineProvider({ children }: { children: React.ReactNode }) {\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const rafId = useRef<number | null>(null);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(0.8);\r\n\r\n  // ---- helpers ----\r\n  const startRaf = useCallback(() => {\r\n    if (rafId.current != null) return;\r\n    const loop = () => {\r\n      const a = audioRef.current;\r\n      if (a) setCurrentTime(a.currentTime || 0);\r\n      rafId.current = requestAnimationFrame(loop);\r\n    };\r\n    rafId.current = requestAnimationFrame(loop);\r\n  }, []);\r\n\r\n  const stopRaf = useCallback(() => {\r\n    if (rafId.current != null) {\r\n      cancelAnimationFrame(rafId.current);\r\n      rafId.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // ---- init element (browser only) ----\r\n  useEffect(() => {\r\n    const a = new Audio();\r\n    a.preload = \"metadata\";\r\n    a.crossOrigin = \"anonymous\"; // safer for remote files / analyzers\r\n    a.volume = volume;\r\n\r\n    const handleLoadedMeta = () => setDuration(Number.isFinite(a.duration) ? a.duration : 0);\r\n    const handleDurationChange = () => setDuration(Number.isFinite(a.duration) ? a.duration : 0);\r\n    const handleEnded = () => {\r\n      setIsPlaying(false);\r\n      setCurrentTime(0);\r\n      stopRaf();\r\n    };\r\n    const handlePlay = () => {\r\n      setIsPlaying(true);\r\n      startRaf();\r\n    };\r\n    const handlePause = () => {\r\n      setIsPlaying(false);\r\n      stopRaf();\r\n      setCurrentTime(a.currentTime || 0);\r\n    };\r\n    const handleError = () => {\r\n      // Fail quietly for now; consumers can add their own UI if needed.\r\n      console.error(\"Audio error\", a.error);\r\n      setIsPlaying(false);\r\n      stopRaf();\r\n    };\r\n\r\n    a.addEventListener(\"loadedmetadata\", handleLoadedMeta);\r\n    a.addEventListener(\"durationchange\", handleDurationChange);\r\n    a.addEventListener(\"ended\", handleEnded);\r\n    a.addEventListener(\"play\", handlePlay);\r\n    a.addEventListener(\"pause\", handlePause);\r\n    a.addEventListener(\"error\", handleError);\r\n\r\n    audioRef.current = a;\r\n\r\n    return () => {\r\n      // cleanup (React 18 StrictMode safe)\r\n      a.pause();\r\n      stopRaf();\r\n      a.src = \"\"; // release resource\r\n      a.load();\r\n\r\n      a.removeEventListener(\"loadedmetadata\", handleLoadedMeta);\r\n      a.removeEventListener(\"durationchange\", handleDurationChange);\r\n      a.removeEventListener(\"ended\", handleEnded);\r\n      a.removeEventListener(\"play\", handlePlay);\r\n      a.removeEventListener(\"pause\", handlePause);\r\n      a.removeEventListener(\"error\", handleError);\r\n\r\n      audioRef.current = null;\r\n    };\r\n  }, [startRaf, stopRaf, volume]);\r\n\r\n  // ---- controls ----\r\n  const play = useCallback(() => {\r\n    const a = audioRef.current;\r\n    if (!a) return;\r\n    a\r\n      .play()\r\n      .then(() => {\r\n        // isPlaying will be set by 'play' event\r\n      })\r\n      .catch((err) => {\r\n        // Autoplay policy or quick toggle race; keep state consistent.\r\n        console.warn(\"play() rejected:\", err?.message || err);\r\n        setIsPlaying(false);\r\n      });\r\n  }, []);\r\n\r\n  const pause = useCallback(() => {\r\n    const a = audioRef.current;\r\n    if (!a) return;\r\n    a.pause();\r\n    // 'pause' event will handle state/rAF\r\n  }, []);\r\n\r\n  const stop = useCallback(() => {\r\n    const a = audioRef.current;\r\n    if (!a) return;\r\n    a.pause();\r\n    a.currentTime = 0;\r\n    setCurrentTime(0);\r\n    setIsPlaying(false);\r\n    stopRaf();\r\n  }, [stopRaf]);\r\n\r\n  const setVolumeLevel = useCallback((newVolume: number) => {\r\n    const v = Math.min(1, Math.max(0, newVolume));\r\n    setVolume(v);\r\n    if (audioRef.current) audioRef.current.volume = v;\r\n  }, []);\r\n\r\n  const loadAudio = useCallback((audioUrl: string) => {\r\n    const a = audioRef.current;\r\n    if (!a) return;\r\n\r\n    // Reset state before loading new source\r\n    stopRaf();\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n    setDuration(0);\r\n\r\n    // Assign source & load\r\n    a.src = audioUrl;\r\n    // calling load() ensures 'loadedmetadata' fires reliably\r\n    a.load();\r\n  }, [stopRaf]);\r\n\r\n  const seekTo = useCallback((time: number) => {\r\n    const a = audioRef.current;\r\n    if (!a) return;\r\n    const d = Number.isFinite(a.duration) ? a.duration : 0;\r\n    // allow seeking even if metadata isn't ready; clamp if known\r\n    const t = d > 0 ? Math.min(Math.max(time, 0), d) : Math.max(time, 0);\r\n    a.currentTime = t;\r\n    setCurrentTime(t);\r\n  }, []);\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      isPlaying,\r\n      currentTime,\r\n      duration,\r\n      volume,\r\n      play,\r\n      pause,\r\n      stop,\r\n      setVolume: setVolumeLevel,\r\n      loadAudio,\r\n      seekTo,\r\n    }),\r\n    [isPlaying, currentTime, duration, volume, play, pause, stop, setVolumeLevel, loadAudio, seekTo]\r\n  );\r\n\r\n  return (\r\n    <AudioEngineContext.Provider value={value}>\r\n      {children}\r\n    </AudioEngineContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAudioEngine() {\r\n  const context = useContext(AudioEngineContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAudioEngine must be used within an AudioEngineProvider\");\r\n  }\r\n  return context;\r\n}","import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n","import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9 rounded-md\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean;\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants };\r\n","import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nfunction Badge({\r\n  className,\r\n  variant,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"span\"> &\r\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"span\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"badge\"\r\n      className={cn(badgeVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Avatar({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\r\n  return (\r\n    <AvatarPrimitive.Root\r\n      data-slot=\"avatar\"\r\n      className={cn(\r\n        \"relative flex size-10 shrink-0 overflow-hidden rounded-full\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction AvatarImage({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\r\n  return (\r\n    <AvatarPrimitive.Image\r\n      data-slot=\"avatar-image\"\r\n      className={cn(\"aspect-square size-full\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction AvatarFallback({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\r\n  return (\r\n    <AvatarPrimitive.Fallback\r\n      data-slot=\"avatar-fallback\"\r\n      className={cn(\r\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback };\r\n","import React from \"react\";\r\nimport { Brain, Zap, User, Settings, LogOut } from \"lucide-react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"./ui/avatar\";\r\nimport { useAuth } from \"./Auth\";\r\n\r\ninterface HeaderProps {\r\n  onShowSubscription: () => void;\r\n}\r\n\r\nexport function Header({ onShowSubscription }: HeaderProps) {\r\n  const { user, signOut } = useAuth();\r\n  return (\r\n    <header className=\"h-16 border-b border-purple-800/30 bg-black/20 backdrop-blur-sm px-6 flex items-center justify-between\">\r\n      {/* Logo and Branding */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-lg flex items-center justify-center\">\r\n            <Brain className=\"w-5 h-5 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\">\r\n            ChordCraft Studio\r\n          </h1>\r\n        </div>\r\n        \r\n        <div className=\"flex gap-2\">\r\n          <Badge variant=\"secondary\" className=\"bg-purple-600/20 text-purple-300 border-purple-500/30\">\r\n            <Zap className=\"w-3 h-3 mr-1\" />\r\n            AI-Powered\r\n          </Badge>\r\n          <Badge variant=\"outline\" className=\"bg-gradient-to-r from-yellow-400/10 to-yellow-600/10 text-yellow-400 border-yellow-500/30\">\r\n            PRO User\r\n          </Badge>\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Actions */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button \r\n          variant=\"outline\" \r\n          size=\"sm\"\r\n          onClick={onShowSubscription}\r\n          className=\"bg-gradient-to-r from-purple-600 to-pink-600 border-none text-white hover:from-purple-700 hover:to-pink-700\"\r\n        >\r\n          Upgrade to PRO\r\n        </Button>\r\n        \r\n        <Button variant=\"ghost\" size=\"sm\">\r\n          <Settings className=\"w-4 h-4\" />\r\n        </Button>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          <Avatar className=\"w-8 h-8\">\r\n            <AvatarImage src={user?.user_metadata?.avatar_url} />\r\n            <AvatarFallback className=\"bg-purple-600\">\r\n              <User className=\"w-4 h-4\" />\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          \r\n          <div className=\"text-sm\">\r\n            <div className=\"text-slate-200 font-medium\">\r\n              {user?.user_metadata?.full_name || user?.email || 'User'}\r\n            </div>\r\n          </div>\r\n          \r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"sm\"\r\n            onClick={signOut}\r\n            className=\"text-slate-400 hover:text-slate-200\"\r\n          >\r\n            <LogOut className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}","import React from \"react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { cn } from \"./ui/utils\";\r\n\r\ninterface HapticButtonProps extends React.ComponentProps<typeof Button> {\r\n  hapticType?: \"light\" | \"medium\" | \"heavy\" | \"selection\";\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function HapticButton({ \r\n  hapticType = \"light\", \r\n  onClick, \r\n  className,\r\n  children, \r\n  ...props \r\n}: HapticButtonProps) {\r\n  const triggerHaptic = () => {\r\n    // Web Vibration API for mobile devices\r\n    if (navigator.vibrate) {\r\n      switch (hapticType) {\r\n        case \"light\":\r\n          navigator.vibrate(10);\r\n          break;\r\n        case \"medium\":\r\n          navigator.vibrate(20);\r\n          break;\r\n        case \"heavy\":\r\n          navigator.vibrate([30, 10, 30]);\r\n          break;\r\n        case \"selection\":\r\n          navigator.vibrate(5);\r\n          break;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    triggerHaptic();\r\n    onClick?.(e);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      {...props}\r\n      onClick={handleClick}\r\n      className={cn(\r\n        \"transition-all duration-200 active:scale-95 hover:shadow-lg\",\r\n        \"active:shadow-inner active:brightness-90\",\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </Button>\r\n  );\r\n}","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Slider({\r\n  className,\r\n  defaultValue,\r\n  value,\r\n  min = 0,\r\n  max = 100,\r\n  ...props\r\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\r\n  const _values = React.useMemo(\r\n    () =>\r\n      Array.isArray(value)\r\n        ? value\r\n        : Array.isArray(defaultValue)\r\n          ? defaultValue\r\n          : [min, max],\r\n    [value, defaultValue, min, max],\r\n  );\r\n\r\n  return (\r\n    <SliderPrimitive.Root\r\n      data-slot=\"slider\"\r\n      defaultValue={defaultValue}\r\n      value={value}\r\n      min={min}\r\n      max={max}\r\n      className={cn(\r\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <SliderPrimitive.Track\r\n        data-slot=\"slider-track\"\r\n        className={cn(\r\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\",\r\n        )}\r\n      >\r\n        <SliderPrimitive.Range\r\n          data-slot=\"slider-range\"\r\n          className={cn(\r\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\",\r\n          )}\r\n        />\r\n      </SliderPrimitive.Track>\r\n      {Array.from({ length: _values.length }, (_, index) => (\r\n        <SliderPrimitive.Thumb\r\n          data-slot=\"slider-thumb\"\r\n          key={index}\r\n          className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\r\n        />\r\n      ))}\r\n    </SliderPrimitive.Root>\r\n  );\r\n}\r\n\r\nexport { Slider };\r\n","import React from \"react\";\r\nimport { Slider } from \"./ui/slider\";\r\nimport { cn } from \"./ui/utils\";\r\n\r\ninterface HapticSliderProps extends React.ComponentProps<typeof Slider> {\r\n  onValueChange?: (value: number[]) => void;\r\n}\r\n\r\nexport function HapticSlider({ onValueChange, className, ...props }: HapticSliderProps) {\r\n  const handleValueChange = (value: number[]) => {\r\n    // Light haptic feedback for slider interaction\r\n    if (navigator.vibrate) {\r\n      navigator.vibrate(3);\r\n    }\r\n    onValueChange?.(value);\r\n  };\r\n\r\n  return (\r\n    <Slider\r\n      {...props}\r\n      onValueChange={handleValueChange}\r\n      className={cn(\r\n        \"transition-all duration-200\",\r\n        \"[&>span[role=slider]]:transition-all [&>span[role=slider]]:duration-200\",\r\n        \"[&>span[role=slider]]:hover:scale-105 [&>span[role=slider]]:active:scale-110\",\r\n        \"[&>span[role=slider]]:hover:shadow-lg [&>span[role=slider]]:active:shadow-xl\",\r\n        className\r\n      )}\r\n    />\r\n  );\r\n}","import * as React from \"react\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <h4\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <p\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6 [&:last-child]:pb-6\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 pb-6 [.border-t]:pt-6\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n};\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Progress({\r\n  className,\r\n  value,\r\n  ...props\r\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\r\n  return (\r\n    <ProgressPrimitive.Root\r\n      data-slot=\"progress\"\r\n      className={cn(\r\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ProgressPrimitive.Indicator\r\n        data-slot=\"progress-indicator\"\r\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\r\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n      />\r\n    </ProgressPrimitive.Root>\r\n  );\r\n}\r\n\r\nexport { Progress };\r\n","/**\r\n * ChordCraft v2 Decoder\r\n * Supports both lossless (FLAC) and neural codec playback\r\n */\r\n\r\nexport interface ChordCraftMetadata {\r\n  bpm: number;\r\n  key: string;\r\n  time: string;\r\n  chords: string;\r\n}\r\n\r\nexport interface AudioPayload {\r\n  format: 'flac' | 'neural_codec';\r\n  sampleRate: number;\r\n  channels: number;\r\n  sha256?: string;\r\n  chunks?: number;\r\n  chunkSize?: number;\r\n  duration?: number;\r\n  model?: string;\r\n  tokens?: number;\r\n  compressionRatio?: number;\r\n}\r\n\r\nexport interface ChordCraftSong {\r\n  meta: ChordCraftMetadata;\r\n  analysis: {\r\n    chords: string;\r\n  };\r\n  audio?: AudioPayload;\r\n  neural?: AudioPayload;\r\n  flacData?: ArrayBuffer;\r\n  neuralTokens?: number[];\r\n}\r\n\r\nexport class ChordCraftDecoder {\r\n  private audioContext: AudioContext | null = null;\r\n\r\n  constructor() {\r\n    if (typeof window !== 'undefined') {\r\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse ChordCraft v2 code and extract all components\r\n   */\r\n  async parseChordCraftCode(code: string): Promise<ChordCraftSong> {\r\n    const lines = code.split('\\n');\r\n    let currentLine = 0;\r\n\r\n    // Parse metadata\r\n    const metaMatch = code.match(/meta:\\s*\\{\\s*bpm:\\s*(\\d+),\\s*key:\\s*\"([^\"]+)\",\\s*time:\\s*\"([^\"]+)\"\\s*\\}/);\r\n    if (!metaMatch) throw new Error('Invalid metadata format');\r\n\r\n    const meta: ChordCraftMetadata = {\r\n      bpm: parseInt(metaMatch[1]),\r\n      key: metaMatch[2],\r\n      time: metaMatch[3]\r\n    };\r\n\r\n    // Parse chords\r\n    const chordsMatch = code.match(/chords:\\s*([^}]+)/);\r\n    const chords = chordsMatch ? chordsMatch[1].trim() : '| N | N | N | N |';\r\n\r\n    // Parse audio payload\r\n    const audioMatch = code.match(/audio:\\s*\\{([^}]+)\\}/);\r\n    let audio: AudioPayload | undefined;\r\n    if (audioMatch) {\r\n      const audioStr = audioMatch[1];\r\n      const formatMatch = audioStr.match(/format:\\s*\"([^\"]+)\"/);\r\n      const srMatch = audioStr.match(/sr:\\s*(\\d+)/);\r\n      const channelsMatch = audioStr.match(/channels:\\s*(\\d+)/);\r\n      const shaMatch = audioStr.match(/sha256:\\s*\"([^\"]+)\"/);\r\n      const chunksMatch = audioStr.match(/chunks:\\s*(\\d+)/);\r\n      const chunkSizeMatch = audioStr.match(/chunk_size:\\s*(\\d+)/);\r\n\r\n      audio = {\r\n        format: (formatMatch?.[1] as 'flac' | 'neural_codec') || 'flac',\r\n        sampleRate: parseInt(srMatch?.[1] || '44100'),\r\n        channels: parseInt(channelsMatch?.[1] || '2'),\r\n        sha256: shaMatch?.[1],\r\n        chunks: parseInt(chunksMatch?.[1] || '0'),\r\n        chunkSize: parseInt(chunkSizeMatch?.[1] || '65536')\r\n      };\r\n    }\r\n\r\n    // Parse neural codec\r\n    const neuralMatch = code.match(/neural:\\s*\\{([^}]+)\\}/);\r\n    let neural: AudioPayload | undefined;\r\n    if (neuralMatch) {\r\n      const neuralStr = neuralMatch[1];\r\n      const formatMatch = neuralStr.match(/format:\\s*\"([^\"]+)\"/);\r\n      const modelMatch = neuralStr.match(/model:\\s*\"([^\"]+)\"/);\r\n      const tokensMatch = neuralStr.match(/tokens:\\s*(\\d+)/);\r\n      const compressionMatch = neuralStr.match(/compression_ratio:\\s*([\\d.]+)/);\r\n\r\n      neural = {\r\n        format: 'neural_codec',\r\n        sampleRate: 24000,\r\n        channels: 1,\r\n        model: modelMatch?.[1],\r\n        tokens: parseInt(tokensMatch?.[1] || '0'),\r\n        compressionRatio: parseFloat(compressionMatch?.[1] || '0')\r\n      };\r\n    }\r\n\r\n    // Extract FLAC data if present\r\n    let flacData: ArrayBuffer | undefined;\r\n    if (audio?.format === 'flac' && audio.chunks) {\r\n      flacData = await this.extractFlacData(code, audio);\r\n    }\r\n\r\n    // Extract neural tokens if present\r\n    let neuralTokens: number[] | undefined;\r\n    if (neural) {\r\n      const tokensMatch = code.match(/<<NEURAL_TOKENS>>\\s*(\\[.*?\\])/s);\r\n      if (tokensMatch) {\r\n        try {\r\n          neuralTokens = JSON.parse(tokensMatch[1]);\r\n        } catch (e) {\r\n          console.warn('Failed to parse neural tokens:', e);\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      meta,\r\n      analysis: { chords },\r\n      audio,\r\n      neural,\r\n      flacData,\r\n      neuralTokens\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Extract and reconstruct FLAC data from code chunks\r\n   */\r\n  private async extractFlacData(code: string, audio: AudioPayload): Promise<ArrayBuffer> {\r\n    const chunks: string[] = [];\r\n    \r\n    for (let i = 1; i <= (audio.chunks || 0); i++) {\r\n      const chunkRegex = new RegExp(`<<PAYLOAD:FLAC:${i}>>\\\\s*([\\\\s\\\\S]*?)(?=<<PAYLOAD:FLAC:|\\\\n\\\\})`, 'g');\r\n      const match = chunkRegex.exec(code);\r\n      if (match) {\r\n        chunks[i - 1] = match[1].replace(/\\s+/g, '');\r\n      }\r\n    }\r\n\r\n    const b64Data = chunks.join('');\r\n    const binaryString = atob(b64Data);\r\n    const bytes = new Uint8Array(binaryString.length);\r\n    \r\n    for (let i = 0; i < binaryString.length; i++) {\r\n      bytes[i] = binaryString.charCodeAt(i);\r\n    }\r\n\r\n    // Verify checksum if available\r\n    if (audio.sha256 && typeof crypto !== 'undefined' && crypto.subtle) {\r\n      const hashBuffer = await crypto.subtle.digest('SHA-256', bytes);\r\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n      \r\n      if (hashHex !== audio.sha256) {\r\n        throw new Error('Checksum mismatch - audio data may be corrupted');\r\n      }\r\n    }\r\n\r\n    return bytes.buffer;\r\n  }\r\n\r\n  /**\r\n   * Play audio from ChordCraft song data\r\n   * Prioritizes lossless over neural codec\r\n   */\r\n  async playAudio(song: ChordCraftSong): Promise<AudioBufferSourceNode> {\r\n    if (!this.audioContext) {\r\n      throw new Error('AudioContext not available');\r\n    }\r\n\r\n    let audioBuffer: AudioBuffer;\r\n\r\n    // Try lossless first (guaranteed identical)\r\n    if (song.flacData) {\r\n      try {\r\n        audioBuffer = await this.decodeFlac(song.flacData);\r\n      } catch (e) {\r\n        console.warn('FLAC decode failed, falling back to neural:', e);\r\n        audioBuffer = await this.decodeNeural(song.neuralTokens || []);\r\n      }\r\n    } \r\n    // Fall back to neural codec (near-identical)\r\n    else if (song.neuralTokens) {\r\n      audioBuffer = await this.decodeNeural(song.neuralTokens);\r\n    }\r\n    // Last resort: synthesize from metadata\r\n    else {\r\n      audioBuffer = await this.synthesizeFromMetadata(song.meta);\r\n    }\r\n\r\n    const source = this.audioContext.createBufferSource();\r\n    source.buffer = audioBuffer;\r\n    source.connect(this.audioContext.destination);\r\n    source.start();\r\n\r\n    return source;\r\n  }\r\n\r\n  /**\r\n   * Decode FLAC data to AudioBuffer\r\n   */\r\n  private async decodeFlac(flacData: ArrayBuffer): Promise<AudioBuffer> {\r\n    if (!this.audioContext) throw new Error('AudioContext not available');\r\n    \r\n    // 1) Try native decode first (Chrome/Edge often OK)\r\n    try {\r\n      return await this.audioContext.decodeAudioData(flacData.slice(0));\r\n    } catch (_) {\r\n      // continue to wasm fallback\r\n    }\r\n\r\n    // 2) ffmpeg.wasm fallback (lazy-loaded, cross-browser)\r\n    try {\r\n      const { createFFmpeg, fetchFile } = await import('@ffmpeg/ffmpeg');\r\n      const ffmpeg = createFFmpeg({ \r\n        log: false, \r\n        corePath: '/node_modules/@ffmpeg/core/dist/ffmpeg-core.js' as any \r\n      });\r\n      \r\n      if (!ffmpeg.isLoaded()) {\r\n        console.log('Loading ffmpeg.wasm for FLAC decoding...');\r\n        await ffmpeg.load();\r\n      }\r\n\r\n      // Write FLAC to virtual FS\r\n      ffmpeg.FS('writeFile', 'in.flac', new Uint8Array(flacData));\r\n      \r\n      // Transcode FLAC  WAV (preserves original sample rate and channels)\r\n      await ffmpeg.run('-i', 'in.flac', '-f', 'wav', 'out.wav');\r\n      const wavU8 = ffmpeg.FS('readFile', 'out.wav');\r\n      \r\n      // Clean up virtual files\r\n      ffmpeg.FS('unlink', 'in.flac');\r\n      ffmpeg.FS('unlink', 'out.wav');\r\n\r\n      // Decode WAV natively (universally supported)\r\n      return await this.audioContext.decodeAudioData(wavU8.buffer);\r\n    } catch (e) {\r\n      console.error('ffmpeg.wasm FLAC decode failed:', e);\r\n      throw new Error('FLAC decoding failed - please use WAV format or neural codec');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Decode neural codec tokens to AudioBuffer\r\n   */\r\n  private async decodeNeural(tokens: number[]): Promise<AudioBuffer> {\r\n    if (!this.audioContext) throw new Error('AudioContext not available');\r\n    \r\n    // Placeholder implementation\r\n    // In production, you'd load the actual neural codec model\r\n    console.log('Decoding neural tokens (placeholder implementation)');\r\n    \r\n    // For demo, generate a simple tone based on tokens\r\n    const sampleRate = 24000;\r\n    const duration = tokens.length / 100; // Rough duration estimate\r\n    const buffer = this.audioContext.createBuffer(1, sampleRate * duration, sampleRate);\r\n    const channelData = buffer.getChannelData(0);\r\n    \r\n    for (let i = 0; i < channelData.length; i++) {\r\n      const tokenIndex = Math.floor(i / channelData.length * tokens.length);\r\n      const token = tokens[tokenIndex] || 0;\r\n      channelData[i] = (token / 1000) * 0.1; // Convert token to audio sample\r\n    }\r\n    \r\n    return buffer;\r\n  }\r\n\r\n  /**\r\n   * Synthesize audio from metadata (fallback)\r\n   */\r\n  private async synthesizeFromMetadata(meta: ChordCraftMetadata): Promise<AudioBuffer> {\r\n    if (!this.audioContext) throw new Error('AudioContext not available');\r\n    \r\n    const sampleRate = 44100;\r\n    const duration = 4; // 4 seconds\r\n    const buffer = this.audioContext.createBuffer(1, sampleRate * duration, sampleRate);\r\n    const channelData = buffer.getChannelData(0);\r\n    \r\n    // Generate a simple tone based on BPM\r\n    const frequency = 440; // A4 note\r\n    for (let i = 0; i < channelData.length; i++) {\r\n      const time = i / sampleRate;\r\n      channelData[i] = Math.sin(2 * Math.PI * frequency * time) * 0.1;\r\n    }\r\n    \r\n    return buffer;\r\n  }\r\n\r\n  /**\r\n   * Get playback strategy for a song\r\n   */\r\n  getPlaybackStrategy(song: ChordCraftSong): 'lossless' | 'neural' | 'synthetic' {\r\n    if (song.flacData) return 'lossless';\r\n    if (song.neuralTokens) return 'neural';\r\n    return 'synthetic';\r\n  }\r\n\r\n  /**\r\n   * Verify checksum integrity for identical playback guarantee\r\n   */\r\n  async verifyChecksum(song: ChordCraftSong): Promise<{ valid: boolean; hash: string; expected: string }> {\r\n    if (!song.flacData || !song.audio?.sha256) {\r\n      return { valid: false, hash: '', expected: song.audio?.sha256 || '' };\r\n    }\r\n\r\n    if (typeof crypto === 'undefined' || !crypto.subtle) {\r\n      return { valid: false, hash: '', expected: song.audio.sha256 };\r\n    }\r\n\r\n    try {\r\n      const hashBuffer = await crypto.subtle.digest('SHA-256', song.flacData);\r\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n      const hash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n      \r\n      return {\r\n        valid: hash === song.audio.sha256,\r\n        hash,\r\n        expected: song.audio.sha256\r\n      };\r\n    } catch (e) {\r\n      console.error('Checksum verification failed:', e);\r\n      return { valid: false, hash: '', expected: song.audio.sha256 };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get file size estimate for code\r\n   */\r\n  getSizeEstimate(song: ChordCraftSong): { lossless: number; neural: number; total: number } {\r\n    const lossless = song.flacData ? song.flacData.byteLength : 0;\r\n    const neural = song.neuralTokens ? song.neuralTokens.length * 2 : 0; // 2 bytes per token\r\n    const total = lossless + neural;\r\n    \r\n    return { lossless, neural, total };\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const chordCraftDecoder = new ChordCraftDecoder();\r\n","\"use client\";\r\nimport React, { useState, useRef } from \"react\";\r\nimport { Upload, FileAudio, Loader2, Music, CheckCircle, AlertTriangle } from \"lucide-react\";\r\nimport { HapticButton } from \"./HapticButton\";\r\nimport { Card, CardContent } from \"./ui/card\";\r\nimport { Progress } from \"./ui/progress\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { chordCraftDecoder, ChordCraftSong } from \"../utils/ChordCraftDecoder\";\r\n\r\ninterface FileUploadResult {\r\n  fileName: string;\r\n  fileSize: number;\r\n  fileType: string;\r\n  audioBuffer?: ArrayBuffer;\r\n  generatedCode?: string;\r\n  chordCraftSong?: ChordCraftSong;\r\n  playbackStrategy?: \"lossless\" | \"neural\" | \"synthetic\";\r\n}\r\n\r\ninterface SimpleFileUploadProps {\r\n  onUpload: (result: FileUploadResult) => void;\r\n}\r\n\r\nexport function SimpleFileUpload({ onUpload }: SimpleFileUploadProps) {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [checksumStatus, setChecksumStatus] = useState<{ valid: boolean; hash: string } | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const backendUrl =\r\n    (import.meta as any).env?.VITE_BACKEND_URL || \"http://127.0.0.1:5000\";\r\n\r\n  const validFile = (f: File) =>\r\n    [\"audio/mpeg\", \"audio/wav\", \"audio/ogg\", \"audio/aac\", \"audio/mp4\"].includes(\r\n      f.type\r\n    ) || /\\.(mp3|wav|ogg|aac|m4a|flac)$/i.test(f.name);\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  };\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  };\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    const files = Array.from(e.dataTransfer.files);\r\n    if (files.length > 0) handleFileUpload(files[0]);\r\n  };\r\n  const handleFileSelect = () => fileInputRef.current?.click();\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const f = e.target.files?.[0];\r\n    if (f) handleFileUpload(f);\r\n  };\r\n\r\n  const handleFileUpload = async (file: File) => {\r\n    if (!validFile(file)) {\r\n      alert(\"Please select a valid audio file (MP3/WAV/OGG/AAC/M4A/FLAC).\");\r\n      return;\r\n    }\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n    if (navigator.vibrate) navigator.vibrate([10, 5, 10]);\r\n\r\n    try {\r\n      // Use XHR to get real progress\r\n      const fd = new FormData();\r\n      fd.append(\"audio\", file);\r\n\r\n      const url = `${backendUrl}/analyze`;\r\n      const xhr = new XMLHttpRequest();\r\n      const promise: Promise<string> = new Promise((resolve, reject) => {\r\n        xhr.open(\"POST\", url, true);\r\n        xhr.responseType = \"json\";\r\n        xhr.upload.onprogress = (ev) => {\r\n          if (ev.lengthComputable) {\r\n            setUploadProgress(Math.round((ev.loaded / ev.total) * 100));\r\n          }\r\n        };\r\n        xhr.onerror = () => reject(new Error(\"Network error\"));\r\n        xhr.onload = () => {\r\n          if (xhr.status >= 200 && xhr.status < 300) {\r\n            // Expecting: { success: true, code: \"...\" }\r\n            const body = xhr.response || {};\r\n            if (body.success && typeof body.code === \"string\") {\r\n              resolve(body.code);\r\n            } else {\r\n              reject(\r\n                new Error(\r\n                  body.error || \"Unexpected response (missing code field)\"\r\n                )\r\n              );\r\n            }\r\n          } else {\r\n            reject(new Error(`HTTP ${xhr.status}`));\r\n          }\r\n        };\r\n        xhr.send(fd);\r\n      });\r\n\r\n      const code = await promise;\r\n      setUploadProgress(100);\r\n\r\n      // Try to parse ChordCraft v2\r\n      let song: ChordCraftSong | undefined;\r\n      let strategy: \"lossless\" | \"neural\" | \"synthetic\" = \"synthetic\";\r\n      try {\r\n        song = await chordCraftDecoder.parseChordCraftCode(code);\r\n        strategy = chordCraftDecoder.getPlaybackStrategy(song);\r\n        \r\n        // Verify checksum for identical playback guarantee\r\n        if (song && strategy === 'lossless') {\r\n          const checksum = await chordCraftDecoder.verifyChecksum(song);\r\n          setChecksumStatus({ valid: checksum.valid, hash: checksum.hash });\r\n        }\r\n      } catch (e) {\r\n        console.warn(\"ChordCraft parse failed (still OK for plain text code):\", e);\r\n      }\r\n\r\n      const uploadResult: FileUploadResult = {\r\n        fileName: file.name,\r\n        fileSize: file.size,\r\n        fileType: file.type,\r\n        audioBuffer: await file.arrayBuffer(),\r\n        generatedCode: code,\r\n        chordCraftSong: song,\r\n        playbackStrategy: strategy,\r\n      };\r\n\r\n      onUpload(uploadResult);\r\n      if (navigator.vibrate) navigator.vibrate([20, 10, 20]);\r\n    } catch (err: any) {\r\n      console.error(\"Upload failed:\", err);\r\n      alert(`Upload failed: ${err?.message || \"Unknown error\"}`);\r\n      if (navigator.vibrate) navigator.vibrate([100, 50, 100]);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"relative overflow-hidden\">\r\n      <CardContent className=\"p-6\">\r\n        <motion.div\r\n          className={`relative border-2 border-dashed rounded-lg p-8 text-center transition-all duration-300 ${\r\n            isDragging\r\n              ? \"border-primary bg-primary/10 scale-105\"\r\n              : isUploading\r\n              ? \"border-green-500 bg-green-500/10\"\r\n              : \"border-muted-foreground/30 hover:border-primary/50 hover:bg-primary/5\"\r\n          }`}\r\n          onDragOver={handleDragOver}\r\n          onDragLeave={handleDragLeave}\r\n          onDrop={handleDrop}\r\n          animate={isDragging ? { scale: 1.02 } : { scale: 1 }}\r\n          transition={{ duration: 0.2 }}\r\n        >\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept=\"audio/*,.mp3,.wav,.ogg,.aac,.m4a,.flac\"\r\n            onChange={handleFileChange}\r\n            className=\"hidden\"\r\n          />\r\n          <AnimatePresence mode=\"wait\">\r\n            {isUploading ? (\r\n              <motion.div\r\n                key=\"uploading\"\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                className=\"space-y-4\"\r\n              >\r\n                <motion.div\r\n                  animate={{ rotate: 360 }}\r\n                  transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                >\r\n                  <Loader2 className=\"w-12 h-12 mx-auto text-primary\" />\r\n                </motion.div>\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"text-sm font-medium\">Uploading & analyzing</p>\r\n                  <Progress value={uploadProgress} className=\"w-full\" />\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    {uploadProgress}% complete\r\n                  </p>\r\n                </div>\r\n              </motion.div>\r\n            ) : (\r\n              <motion.div\r\n                key=\"upload\"\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                className=\"space-y-4\"\r\n              >\r\n                <motion.div\r\n                  animate={isDragging ? { scale: 1.2 } : { scale: 1 }}\r\n                  transition={{ duration: 0.2 }}\r\n                >\r\n                  {isDragging ? (\r\n                    <FileAudio className=\"w-12 h-12 mx-auto text-primary\" />\r\n                  ) : (\r\n                    <Upload className=\"w-12 h-12 mx-auto text-muted-foreground\" />\r\n                  )}\r\n                </motion.div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <h3 className=\"font-medium\">\r\n                    {isDragging ? \"Drop your audio file here\" : \"Upload Audio File\"}\r\n                  </h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Drag & drop or click to select\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    MP3, WAV, OGG, AAC, M4A, FLAC\r\n                  </p>\r\n                  \r\n                  {checksumStatus && (\r\n                    <div className=\"flex items-center justify-center gap-2 text-xs mt-2\">\r\n                      {checksumStatus.valid ? (\r\n                        <>\r\n                          <CheckCircle className=\"w-3 h-3 text-green-400\" />\r\n                          <span className=\"text-green-400\"> Identical Playback Guaranteed</span>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <AlertTriangle className=\"w-3 h-3 text-yellow-400\" />\r\n                          <span className=\"text-yellow-400\"> Code Modified</span>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <HapticButton\r\n                  onClick={handleFileSelect}\r\n                  variant=\"outline\"\r\n                  hapticType=\"medium\"\r\n                  className=\"mt-4\"\r\n                >\r\n                  <Music className=\"w-4 h-4 mr-2\" />\r\n                  Choose File\r\n                </HapticButton>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </motion.div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    data-slot=\"scroll-area\"\r\n    className={cn(\"relative\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport\r\n      data-slot=\"scroll-area-viewport\"\r\n      className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\r\n    >\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n));\r\nScrollArea.displayName = \"ScrollArea\";\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    data-slot=\"scroll-area-scrollbar\"\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none p-px transition-colors select-none\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb\r\n      data-slot=\"scroll-area-thumb\"\r\n      className=\"bg-border relative flex-1 rounded-full\"\r\n    />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n));\r\nScrollBar.displayName = \"ScrollBar\";\r\n\r\nexport { ScrollArea, ScrollBar };\r\n","import React, { useState } from \"react\";\r\nimport { Upload, Music, Volume2, VolumeX, Play, Pause, Plus } from \"lucide-react\";\r\nimport { HapticButton } from \"./HapticButton\";\r\nimport { HapticSlider } from \"./HapticSlider\";\r\nimport { SimpleFileUpload } from \"./SimpleFileUpload\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\r\nimport { ScrollArea } from \"./ui/scroll-area\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Track {\r\n  id: string;\r\n  name: string;\r\n  type: \"audio\" | \"midi\";\r\n  duration: string;\r\n  volume: number;\r\n  muted: boolean;\r\n  solo: boolean;\r\n  generatedCode?: string;\r\n}\r\n\r\ninterface LeftPanelProps {\r\n  currentTrack: Track | null;\r\n  setCurrentTrack: (track: Track | null) => void;\r\n  isPlaying: boolean;\r\n  setIsPlaying: (playing: boolean) => void;\r\n}\r\n\r\nexport function LeftPanel({ currentTrack, setCurrentTrack, isPlaying, setIsPlaying }: LeftPanelProps) {\r\n  const [tracks, setTracks] = useState<Track[]>([\r\n    {\r\n      id: \"1\",\r\n      name: \"Piano Melody\",\r\n      type: \"midi\",\r\n      duration: \"2:34\",\r\n      volume: 80,\r\n      muted: false,\r\n      solo: false\r\n    },\r\n    {\r\n      id: \"2\", \r\n      name: \"Bass Line\",\r\n      type: \"audio\",\r\n      duration: \"2:34\",\r\n      volume: 65,\r\n      muted: false,\r\n      solo: false\r\n    },\r\n    {\r\n      id: \"3\",\r\n      name: \"Drum Pattern\",\r\n      type: \"midi\", \r\n      duration: \"2:34\",\r\n      volume: 90,\r\n      muted: true,\r\n      solo: false\r\n    }\r\n  ]);\r\n\r\n  const handleFileUpload = (result: any) => {\r\n    const newTrack = {\r\n      id: Date.now().toString(),\r\n      name: result.fileName.replace(/\\.[^/.]+$/, \"\"),\r\n      type: \"audio\" as const,\r\n      duration: \"0:00\",\r\n      volume: 80,\r\n      muted: false,\r\n      solo: false,\r\n      generatedCode: result.generatedCode // Store the AI-generated code\r\n    };\r\n    setTracks([...tracks, newTrack]);\r\n    \r\n    // Success haptic feedback\r\n    if (navigator.vibrate) {\r\n      navigator.vibrate([20, 10, 20]);\r\n    }\r\n\r\n    // Show success message with code preview\r\n    if (result.generatedCode) {\r\n      console.log('AI Generated Code:', result.generatedCode);\r\n      // You could show a toast notification here\r\n    }\r\n  };\r\n\r\n  const toggleMute = (trackId: string) => {\r\n    setTracks(tracks.map(track => \r\n      track.id === trackId ? { ...track, muted: !track.muted } : track\r\n    ));\r\n  };\r\n\r\n  const toggleSolo = (trackId: string) => {\r\n    setTracks(tracks.map(track => \r\n      track.id === trackId ? { ...track, solo: !track.solo } : track\r\n    ));\r\n  };\r\n\r\n  const updateVolume = (trackId: string, volume: number) => {\r\n    setTracks(tracks.map(track => \r\n      track.id === trackId ? { ...track, volume } : track\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-80 border-r border-purple-800/30 bg-black/10 backdrop-blur-sm flex flex-col\">\r\n      {/* Audio Upload Section */}\r\n      <Card className=\"m-4 bg-gradient-to-br from-purple-900/30 to-pink-900/30 border-purple-700/30\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Upload className=\"w-5 h-5 text-purple-400\" />\r\n            Audio Upload\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3\">\r\n          <SimpleFileUpload onUpload={handleFileUpload} />\r\n          <HapticButton \r\n            variant=\"outline\" \r\n            hapticType=\"medium\"\r\n            className=\"w-full bg-pink-600/20 border-pink-500/30 hover:bg-pink-600/30 hover:scale-[1.02] transition-all\"\r\n          >\r\n            <Music className=\"w-4 h-4 mr-2\" />\r\n            Record New Track\r\n          </HapticButton>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Track List */}\r\n      <div className=\"flex-1 mx-4 mb-4\">\r\n        <div className=\"mb-3 flex items-center justify-between\">\r\n          <h3 className=\"font-medium text-purple-200\">Tracks</h3>\r\n          <Badge variant=\"secondary\" className=\"bg-purple-600/20 text-purple-300\">\r\n            {tracks.length} tracks\r\n          </Badge>\r\n        </div>\r\n        \r\n        <ScrollArea className=\"h-[calc(100vh-24rem)]\">\r\n          <div className=\"space-y-2\">\r\n            <AnimatePresence>\r\n              {tracks.map((track, index) => (\r\n                <motion.div\r\n                  key={track.id}\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: -20 }}\r\n                  transition={{ delay: index * 0.1 }}\r\n                >\r\n                  <Card \r\n                    className={`bg-gradient-to-r from-slate-800/50 to-slate-700/50 border-slate-600/30 cursor-pointer transition-all hover:from-slate-700/50 hover:to-slate-600/50 hover:scale-[1.02] hover:shadow-lg ${\r\n                      currentTrack?.id === track.id ? 'ring-2 ring-purple-400 shadow-purple-400/20' : ''\r\n                    }`}\r\n                    onClick={() => {\r\n                      if (navigator.vibrate) navigator.vibrate(5);\r\n                      setCurrentTrack(track);\r\n                    }}\r\n                  >\r\n                <CardContent className=\"p-3\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div>\r\n                      <h4 className=\"text-sm font-medium text-white\">{track.name}</h4>\r\n                      <p className=\"text-xs text-slate-400\">\r\n                        {track.type}  {track.duration}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex gap-1\">\r\n                      <HapticButton\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        hapticType=\"selection\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          toggleMute(track.id);\r\n                        }}\r\n                        className={`w-6 h-6 p-0 transition-all hover:scale-110 ${\r\n                          track.muted ? 'text-red-400 bg-red-400/10' : 'text-slate-400 hover:text-slate-200'\r\n                        }`}\r\n                      >\r\n                        <motion.div\r\n                          animate={track.muted ? { rotate: [0, -10, 10, 0] } : {}}\r\n                          transition={{ duration: 0.3 }}\r\n                        >\r\n                          {track.muted ? <VolumeX className=\"w-3 h-3\" /> : <Volume2 className=\"w-3 h-3\" />}\r\n                        </motion.div>\r\n                      </HapticButton>\r\n                      <HapticButton\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        hapticType=\"selection\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          toggleSolo(track.id);\r\n                        }}\r\n                        className={`w-6 h-6 p-0 text-xs transition-all hover:scale-110 ${\r\n                          track.solo ? 'text-yellow-400 bg-yellow-400/10' : 'text-slate-400 hover:text-slate-200'\r\n                        }`}\r\n                      >\r\n                        <motion.span\r\n                          animate={track.solo ? { scale: [1, 1.2, 1] } : {}}\r\n                          transition={{ duration: 0.3 }}\r\n                        >\r\n                          S\r\n                        </motion.span>\r\n                      </HapticButton>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Volume2 className=\"w-3 h-3 text-slate-400\" />\r\n                    <HapticSlider\r\n                      value={[track.volume]}\r\n                      onValueChange={(value) => updateVolume(track.id, value[0])}\r\n                      max={100}\r\n                      step={1}\r\n                      className=\"flex-1\"\r\n                    />\r\n                    <motion.span \r\n                      className=\"text-xs text-slate-400 w-8 font-mono\"\r\n                      key={track.volume}\r\n                      initial={{ scale: 1.1 }}\r\n                      animate={{ scale: 1 }}\r\n                      transition={{ duration: 0.1 }}\r\n                    >\r\n                      {track.volume}\r\n                    </motion.span>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n                </motion.div>\r\n              ))}\r\n            </AnimatePresence>\r\n          </div>\r\n        </ScrollArea>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { Play, Pause, Square, SkipBack, SkipForward, Clock } from \"lucide-react\";\r\nimport { HapticButton } from \"./HapticButton\";\r\nimport { HapticSlider } from \"./HapticSlider\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface EnhancedTransportControlsProps {\r\n  isPlaying: boolean;\r\n  onPlayPause: () => void;\r\n  onStop: () => void;\r\n  onNext: () => void;\r\n  onPrevious: () => void;\r\n  currentTime: number;\r\n  totalTime: number;\r\n  zoom: number;\r\n  onZoomChange: (zoom: number) => void;\r\n}\r\n\r\nexport function EnhancedTransportControls({\r\n  isPlaying,\r\n  onPlayPause,\r\n  onStop,\r\n  onNext,\r\n  onPrevious,\r\n  currentTime,\r\n  totalTime,\r\n  zoom,\r\n  onZoomChange\r\n}: EnhancedTransportControlsProps) {\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [showBeatPulse, setShowBeatPulse] = useState(false);\r\n\r\n  // Beat pulse animation when playing\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      const interval = setInterval(() => {\r\n        setShowBeatPulse(true);\r\n        setTimeout(() => setShowBeatPulse(false), 100);\r\n      }, 500); // 120 BPM = 500ms per beat\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isPlaying]);\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-16 border-b border-purple-800/30 bg-black/20 backdrop-blur-sm px-6 flex items-center justify-between\">\r\n      {/* Transport Controls */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <HapticButton \r\n            size=\"sm\" \r\n            variant=\"ghost\" \r\n            hapticType=\"medium\"\r\n            onClick={onPrevious}\r\n            className=\"text-purple-400 hover:text-purple-300 hover:bg-purple-600/20\"\r\n          >\r\n            <SkipBack className=\"w-4 h-4\" />\r\n          </HapticButton>\r\n          \r\n          <motion.div\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            <HapticButton \r\n              size=\"sm\" \r\n              hapticType=\"heavy\"\r\n              onClick={onPlayPause}\r\n              className={`relative overflow-hidden ${\r\n                isPlaying \r\n                  ? \"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700\" \r\n                  : \"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700\"\r\n              }`}\r\n            >\r\n              <AnimatePresence mode=\"wait\">\r\n                <motion.div\r\n                  key={isPlaying ? \"pause\" : \"play\"}\r\n                  initial={{ scale: 0.8, opacity: 0 }}\r\n                  animate={{ scale: 1, opacity: 1 }}\r\n                  exit={{ scale: 0.8, opacity: 0 }}\r\n                  transition={{ duration: 0.15 }}\r\n                >\r\n                  {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\r\n                </motion.div>\r\n              </AnimatePresence>\r\n              \r\n              {/* Beat pulse effect */}\r\n              <AnimatePresence>\r\n                {showBeatPulse && isPlaying && (\r\n                  <motion.div\r\n                    className=\"absolute inset-0 bg-white/20 rounded\"\r\n                    initial={{ opacity: 0, scale: 1 }}\r\n                    animate={{ opacity: [0, 0.5, 0], scale: [1, 1.1, 1] }}\r\n                    exit={{ opacity: 0 }}\r\n                    transition={{ duration: 0.1 }}\r\n                  />\r\n                )}\r\n              </AnimatePresence>\r\n            </HapticButton>\r\n          </motion.div>\r\n          \r\n          <HapticButton \r\n            size=\"sm\" \r\n            variant=\"ghost\" \r\n            hapticType=\"medium\"\r\n            onClick={onStop}\r\n            className=\"text-purple-400 hover:text-purple-300 hover:bg-purple-600/20\"\r\n          >\r\n            <Square className=\"w-4 h-4\" />\r\n          </HapticButton>\r\n          \r\n          <HapticButton \r\n            size=\"sm\" \r\n            variant=\"ghost\" \r\n            hapticType=\"medium\"\r\n            onClick={onNext}\r\n            className=\"text-purple-400 hover:text-purple-300 hover:bg-purple-600/20\"\r\n          >\r\n            <SkipForward className=\"w-4 h-4\" />\r\n          </HapticButton>\r\n        </div>\r\n        \r\n        <motion.div \r\n          className=\"flex items-center gap-2\"\r\n          animate={isPlaying ? { opacity: [1, 0.7, 1] } : { opacity: 1 }}\r\n          transition={{ duration: 0.5, repeat: isPlaying ? Infinity : 0 }}\r\n        >\r\n          <Clock className=\"w-4 h-4 text-purple-400\" />\r\n          <Badge variant=\"outline\" className=\"bg-purple-900/50 text-purple-200 border-purple-600/30 font-mono\">\r\n            {formatTime(currentTime)} / {formatTime(totalTime)}\r\n          </Badge>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Recording Indicator */}\r\n      <AnimatePresence>\r\n        {isRecording && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: 20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 20 }}\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <motion.div\r\n              animate={{ scale: [1, 1.2, 1] }}\r\n              transition={{ duration: 1, repeat: Infinity }}\r\n              className=\"w-3 h-3 bg-red-500 rounded-full\"\r\n            />\r\n            <span className=\"text-sm text-red-400 font-medium\">REC</span>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Zoom Controls */}\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-sm text-purple-200\">Zoom:</span>\r\n          <HapticSlider\r\n            value={[zoom]}\r\n            onValueChange={(value) => onZoomChange(value[0])}\r\n            min={25}\r\n            max={400}\r\n            step={25}\r\n            className=\"w-24\"\r\n          />\r\n          <motion.span \r\n            className=\"text-sm text-purple-200 w-10 font-mono\"\r\n            key={zoom}\r\n            initial={{ scale: 1.1 }}\r\n            animate={{ scale: 1 }}\r\n            transition={{ duration: 0.1 }}\r\n          >\r\n            {zoom}%\r\n          </motion.span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useRef, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Card, CardContent } from \"./ui/card\";\r\n\r\ninterface Note {\r\n  id: string;\r\n  note: string;\r\n  startTime: number;\r\n  duration: number;\r\n  velocity: number;\r\n  color: string;\r\n}\r\n\r\ninterface ProfessionalPianoRollProps {\r\n  notes: Note[];\r\n  isPlaying: boolean;\r\n  currentTime: number;\r\n  zoom: number;\r\n  onNoteClick?: (note: Note) => void;\r\n  onNoteMove?: (noteId: string, newStart: number, newNote: string) => void;\r\n  onNoteResize?: (noteId: string, newDuration: number) => void;\r\n}\r\n\r\nexport function ProfessionalPianoRoll({\r\n  notes,\r\n  isPlaying,\r\n  currentTime,\r\n  zoom,\r\n  onNoteClick,\r\n  onNoteMove,\r\n  onNoteResize\r\n}: ProfessionalPianoRollProps) {\r\n  const [draggedNote, setDraggedNote] = useState<Note | null>(null);\r\n  const [resizingNote, setResizingNote] = useState<Note | null>(null);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n  const gridRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Professional piano note layout (88 keys like a real piano)\r\n  const allNotes = [\r\n    'C8', 'B7', 'A#7', 'A7', 'G#7', 'G7', 'F#7', 'F7', 'E7', 'D#7', 'D7', 'C#7',\r\n    'C7', 'B6', 'A#6', 'A6', 'G#6', 'G6', 'F#6', 'F6', 'E6', 'D#6', 'D6', 'C#6',\r\n    'C6', 'B5', 'A#5', 'A5', 'G#5', 'G5', 'F#5', 'F5', 'E5', 'D#5', 'D5', 'C#5',\r\n    'C5', 'B4', 'A#4', 'A4', 'G#4', 'G4', 'F#4', 'F4', 'E4', 'D#4', 'D4', 'C#4',\r\n    'C4', 'B3', 'A#3', 'A3', 'G#3', 'G3', 'F#3', 'F3', 'E3', 'D#3', 'D3', 'C#3',\r\n    'C3', 'B2', 'A#2', 'A2', 'G#2', 'G2', 'F#2', 'F2', 'E2', 'D#2', 'D2', 'C#2',\r\n    'C2', 'B1', 'A#1', 'A1'\r\n  ];\r\n\r\n  const noteIndex = useRef(new Map(allNotes.map((note, index) => [note, index])));\r\n\r\n  const isSharpNote = (note: string) => {\r\n    return note.includes('#');\r\n  };\r\n\r\n  const handleTouchStart = (e: React.TouchEvent, note: Note) => {\r\n    e.preventDefault();\r\n    const touch = e.touches[0];\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    \r\n    setDraggedNote(note);\r\n    setDragOffset({\r\n      x: touch.clientX - rect.left,\r\n      y: touch.clientY - rect.top\r\n    });\r\n\r\n    // Enhanced haptic feedback for note interaction\r\n    if (navigator.vibrate) {\r\n      navigator.vibrate([10, 5, 10]);\r\n    }\r\n  };\r\n\r\n  const handleMouseDown = (e: React.MouseEvent, note: Note) => {\r\n    e.preventDefault();\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    \r\n    setDraggedNote(note);\r\n    setDragOffset({\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top\r\n    });\r\n\r\n    // Haptic feedback for desktop interaction\r\n    if (navigator.vibrate) {\r\n      navigator.vibrate(5);\r\n    }\r\n  };\r\n\r\n  const handlePointerMove = (e: React.PointerEvent) => {\r\n    if (!draggedNote || !gridRef.current) return;\r\n    \r\n    e.preventDefault();\r\n    const gridRect = gridRef.current.getBoundingClientRect();\r\n    \r\n    const relativeX = e.clientX - gridRect.left - dragOffset.x;\r\n    const relativeY = e.clientY - gridRect.top - dragOffset.y;\r\n    \r\n    // Calculate new position\r\n    const timePerPixel = 1 / (40 * zoom / 100); // Adjust based on zoom\r\n    const newStart = Math.max(0, relativeX * timePerPixel);\r\n    const noteHeight = 100 / allNotes.length;\r\n    const noteIndex = Math.floor(relativeY / (gridRect.height * noteHeight / 100));\r\n    const newNote = allNotes[noteIndex];\r\n    \r\n    if (newNote && onNoteMove) {\r\n      onNoteMove(draggedNote.id, newStart, newNote);\r\n    }\r\n  };\r\n\r\n  const handlePointerUp = () => {\r\n    if (draggedNote) {\r\n      // Success haptic feedback\r\n      if (navigator.vibrate) {\r\n        navigator.vibrate(20);\r\n      }\r\n    }\r\n    setDraggedNote(null);\r\n    setResizingNote(null);\r\n    setDragOffset({ x: 0, y: 0 });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (draggedNote || resizingNote) {\r\n      document.addEventListener('pointermove', handlePointerMove as any);\r\n      document.addEventListener('pointerup', handlePointerUp);\r\n      \r\n      return () => {\r\n        document.removeEventListener('pointermove', handlePointerMove as any);\r\n        document.removeEventListener('pointerup', handlePointerUp);\r\n      };\r\n    }\r\n  }, [draggedNote, resizingNote]);\r\n\r\n  const gridWidth = 2000 * (zoom / 100); // Scalable grid width\r\n  const noteHeight = 100 / allNotes.length;\r\n  const pixelsPerSecond = 40 * (zoom / 100);\r\n\r\n  return (\r\n    <div className=\"h-full\">\r\n      <Card className=\"h-full\">\r\n        <CardContent className=\"p-0 h-full relative overflow-hidden flex\">\r\n          \r\n          {/* Piano Keys Sidebar */}\r\n          <div className=\"w-20 h-full border-r border-border/50 bg-card/80 backdrop-blur-sm flex-shrink-0 z-20\">\r\n            <div className=\"flex flex-col-reverse h-full\">\r\n              {allNotes.map((note, index) => (\r\n                <motion.div \r\n                  key={note} \r\n                  className={`flex items-center justify-center border-b border-border/20 cursor-pointer transition-all duration-200 ${\r\n                    isSharpNote(note) \r\n                      ? 'bg-slate-800 text-white/70 border-r-4 border-r-border/80 hover:bg-slate-700' \r\n                      : 'bg-card hover:bg-accent text-foreground/80'\r\n                  }`}\r\n                  style={{ height: `${noteHeight}%` }}\r\n                  whileHover={{ scale: 1.02, backgroundColor: isSharpNote(note) ? 'rgb(51, 65, 85)' : 'rgb(248, 250, 252)' }}\r\n                  onClick={() => {\r\n                    if (navigator.vibrate) navigator.vibrate(3);\r\n                    // Play note preview here\r\n                  }}\r\n                >\r\n                  <span className=\"text-xs font-mono select-none\">\r\n                    {note}\r\n                  </span>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Main Grid Area */}\r\n          <div className=\"flex-1 overflow-auto relative\" ref={gridRef}>\r\n            <div \r\n              className=\"relative bg-gradient-to-br from-muted/20 to-muted/10\"\r\n              style={{ \r\n                width: `${gridWidth}px`, \r\n                height: '100%',\r\n                minHeight: `${allNotes.length * 20}px`\r\n              }}\r\n            >\r\n              {/* Vertical Grid Lines (Time) */}\r\n              {Array.from({ length: Math.ceil(gridWidth / (pixelsPerSecond / 4)) }).map((_, i) => {\r\n                const isBarLine = i % 16 === 0; // Every 4 beats\r\n                const isBeatLine = i % 4 === 0; // Every beat\r\n                \r\n                return (\r\n                  <div\r\n                    key={`v-${i}`}\r\n                    className={`absolute top-0 bottom-0 border-r ${\r\n                      isBarLine \r\n                        ? 'border-primary/40 z-10' \r\n                        : isBeatLine \r\n                        ? 'border-primary/20' \r\n                        : 'border-border/30'\r\n                    }`}\r\n                    style={{ left: `${i * (pixelsPerSecond / 4)}px` }}\r\n                  />\r\n                );\r\n              })}\r\n\r\n              {/* Horizontal Grid Lines (Notes) */}\r\n              <div className=\"absolute inset-0 flex flex-col\">\r\n                {allNotes.map((note, i) => (\r\n                  <div \r\n                    key={`h-${i}`} \r\n                    className={`flex-1 border-b border-border/20 ${\r\n                      isSharpNote(note) ? 'bg-slate-950/10 dark:bg-slate-800/20' : 'bg-transparent'\r\n                    }`}\r\n                    style={{ height: `${noteHeight}%` }}\r\n                  />\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Notes */}\r\n              <div className=\"absolute inset-0 z-10\">\r\n                <AnimatePresence>\r\n                  {notes.map((note) => {\r\n                    const noteIdx = noteIndex.current.get(note.note);\r\n                    if (noteIdx === undefined) return null;\r\n                    \r\n                    const isDragging = draggedNote?.id === note.id;\r\n                    const isResizing = resizingNote?.id === note.id;\r\n                    \r\n                    const top = noteIdx * noteHeight;\r\n                    const left = note.startTime * pixelsPerSecond;\r\n                    const width = Math.max(8, note.duration * pixelsPerSecond);\r\n                    const height = noteHeight;\r\n\r\n                    return (\r\n                      <motion.div\r\n                        key={note.id}\r\n                        initial={{ scale: 0.8, opacity: 0 }}\r\n                        animate={{ \r\n                          scale: isDragging ? 1.05 : 1, \r\n                          opacity: note.velocity / 127,\r\n                          zIndex: isDragging ? 100 : 1\r\n                        }}\r\n                        exit={{ scale: 0.8, opacity: 0 }}\r\n                        whileHover={{ scale: 1.02, opacity: 1 }}\r\n                        className={`absolute rounded-sm cursor-move select-none touch-manipulation group ${\r\n                          isDragging ? 'shadow-2xl ring-2 ring-primary/50' : 'hover:shadow-lg'\r\n                        } transition-all duration-200`}\r\n                        style={{\r\n                          top: `${top}%`,\r\n                          left: `${left}px`,\r\n                          width: `${width}px`,\r\n                          height: `${height}%`,\r\n                          backgroundColor: note.color,\r\n                          minWidth: window.innerWidth < 768 ? '16px' : '8px' // Touch-friendly minimum\r\n                        }}\r\n                        onPointerDown={(e) => handleMouseDown(e as any, note)}\r\n                        onTouchStart={(e) => handleTouchStart(e, note)}\r\n                        onClick={() => {\r\n                          if (navigator.vibrate) navigator.vibrate(3);\r\n                          onNoteClick?.(note);\r\n                        }}\r\n                      >\r\n                        {/* Note Content */}\r\n                        <div className=\"h-full w-full flex items-center justify-start px-1\">\r\n                          <span className=\"text-xs text-white/90 font-mono truncate\">\r\n                            {note.note}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Resize Handle */}\r\n                        <div \r\n                          className=\"absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/30 transition-opacity\"\r\n                          onPointerDown={(e) => {\r\n                            e.stopPropagation();\r\n                            setResizingNote(note);\r\n                            if (navigator.vibrate) navigator.vibrate(5);\r\n                          }}\r\n                        />\r\n                      </motion.div>\r\n                    );\r\n                  })}\r\n                </AnimatePresence>\r\n              </div>\r\n\r\n              {/* Enhanced Playhead */}\r\n              <motion.div\r\n                className=\"absolute top-0 bottom-0 bg-gradient-to-b from-yellow-400 to-orange-500 shadow-lg z-50 pointer-events-none\"\r\n                style={{ \r\n                  left: `${currentTime * pixelsPerSecond}px`,\r\n                  width: window.innerWidth < 768 ? '3px' : '2px'\r\n                }}\r\n                animate={isPlaying ? { \r\n                  boxShadow: [\r\n                    \"0 0 5px rgba(250, 204, 21, 0.5)\", \r\n                    \"0 0 20px rgba(250, 204, 21, 0.8)\", \r\n                    \"0 0 5px rgba(250, 204, 21, 0.5)\"\r\n                  ]\r\n                } : {}}\r\n                transition={{ duration: 0.5, repeat: isPlaying ? Infinity : 0 }}\r\n              >\r\n                <motion.div \r\n                  className=\"bg-yellow-400 rounded-full -ml-1 -mt-2 pointer-events-none\"\r\n                  style={{\r\n                    width: window.innerWidth < 768 ? '20px' : '16px',\r\n                    height: window.innerWidth < 768 ? '20px' : '16px'\r\n                  }}\r\n                  animate={isPlaying ? { \r\n                    scale: [1, 1.3, 1],\r\n                    boxShadow: [\r\n                      \"0 0 0 0 rgba(250, 204, 21, 0.7)\",\r\n                      \"0 0 0 10px rgba(250, 204, 21, 0)\",\r\n                      \"0 0 0 0 rgba(250, 204, 21, 0)\"\r\n                    ]\r\n                  } : { scale: 1 }}\r\n                  transition={{ duration: 0.6, repeat: isPlaying ? Infinity : 0 }}\r\n                />\r\n              </motion.div>\r\n            </div>\r\n          </div>\r\n\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}","\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Card } from \"./ui/card\";\r\nimport { EnhancedTransportControls } from \"./EnhancedTransportControls\";\r\nimport { ProfessionalPianoRoll } from \"./ProfessionalPianoRoll\";\r\nimport { useAudioEngine } from \"../services/AudioEngine\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface MainPanelProps {\r\n  currentTrack: any;\r\n  isPlaying: boolean;\r\n}\r\n\r\nexport function MainPanel({ currentTrack, isPlaying }: MainPanelProps) {\r\n  const audioEngine = useAudioEngine();\r\n  const [zoom, setZoom] = useState(100);\r\n  const [playbackState, setPlaybackState] = useState(isPlaying);\r\n\r\n  // Fallback values if audioEngine is undefined\r\n  const safeAudioEngine = audioEngine || {\r\n    currentTime: 0,\r\n    duration: 154,\r\n    isPlaying: false,\r\n    volume: 0.8,\r\n    play: () => {},\r\n    pause: () => {},\r\n    stop: () => {},\r\n    setVolume: () => {},\r\n    loadAudio: () => {},\r\n    seekTo: () => {}\r\n  };\r\n\r\n  // Load sample audio on component mount\r\n  useEffect(() => {\r\n    // For now, we'll generate a simple tone using Web Audio API\r\n    generateSampleAudio();\r\n  }, []);\r\n\r\n  // Generate a simple audio tone for testing\r\n  const generateSampleAudio = () => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n    const oscillator = audioContext.createOscillator();\r\n    const gainNode = audioContext.createGain();\r\n    \r\n    oscillator.connect(gainNode);\r\n    gainNode.connect(audioContext.destination);\r\n    \r\n    oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4 note\r\n    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\r\n    \r\n    // Store the audio context for playback control\r\n    (window as any).audioContext = audioContext;\r\n    (window as any).oscillator = oscillator;\r\n    (window as any).gainNode = gainNode;\r\n  };\r\n\r\n  // Generate piano roll grid\r\n  const generatePianoRoll = () => {\r\n    const notes: string[] = [];\r\n    const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n    const octaves = [5, 4, 3, 2, 1];\r\n    \r\n    octaves.forEach(octave => {\r\n      noteNames.reverse().forEach(note => {\r\n        notes.push(`${note}${octave}`);\r\n      });\r\n      noteNames.reverse();\r\n    });\r\n    \r\n    return notes;\r\n  };\r\n\r\n  const pianoNotes = generatePianoRoll();\r\n  const timeMarkers = Array.from({ length: 32 }, (_, i) => i * 0.25); // Quarter note intervals\r\n\r\n  // Professional note data with realistic structure\r\n  const mockNotes = [\r\n    { id: '1', note: 'C4', startTime: 0, duration: 1, velocity: 80, color: '#6366f1' },\r\n    { id: '2', note: 'E4', startTime: 1, duration: 1, velocity: 75, color: '#6366f1' },\r\n    { id: '3', note: 'G4', startTime: 2, duration: 1, velocity: 85, color: '#6366f1' },\r\n    { id: '4', note: 'C5', startTime: 3, duration: 2, velocity: 90, color: '#6366f1' },\r\n    { id: '5', note: 'A3', startTime: 5, duration: 1, velocity: 70, color: '#ef4444' },\r\n    { id: '6', note: 'C4', startTime: 6, duration: 1, velocity: 75, color: '#ef4444' },\r\n    { id: '7', note: 'E4', startTime: 7, duration: 1, velocity: 80, color: '#ef4444' },\r\n    { id: '8', note: 'A4', startTime: 8, duration: 2, velocity: 85, color: '#ef4444' },\r\n    { id: '9', note: 'F3', startTime: 10, duration: 1, velocity: 70, color: '#10b981' },\r\n    { id: '10', note: 'A3', startTime: 11, duration: 1, velocity: 75, color: '#10b981' },\r\n    { id: '11', note: 'C4', startTime: 12, duration: 1, velocity: 80, color: '#10b981' },\r\n    { id: '12', note: 'F4', startTime: 13, duration: 2, velocity: 85, color: '#10b981' },\r\n  ];\r\n\r\n  const handlePlayPause = () => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    const newPlaybackState = !playbackState;\r\n    setPlaybackState(newPlaybackState);\r\n    \r\n    if (newPlaybackState) {\r\n      // Start playing audio\r\n      const audioContext = (window as any).audioContext;\r\n      if (audioContext && audioContext.state === 'suspended') {\r\n        audioContext.resume();\r\n      }\r\n      \r\n      // Start the oscillator\r\n      const oscillator = (window as any).oscillator;\r\n      if (oscillator) {\r\n        try {\r\n          oscillator.start();\r\n        } catch (e) {\r\n          // Oscillator might already be started\r\n          console.log('Oscillator already started');\r\n        }\r\n      }\r\n    } else {\r\n      // Stop playing audio\r\n      const oscillator = (window as any).oscillator;\r\n      if (oscillator) {\r\n        oscillator.stop();\r\n        // Recreate oscillator for next play\r\n        generateSampleAudio();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleStop = () => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    setPlaybackState(false);\r\n    const oscillator = (window as any).oscillator;\r\n    if (oscillator) {\r\n      oscillator.stop();\r\n      generateSampleAudio();\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    // Navigate to next section or track\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    // Navigate to previous section or track\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col bg-gradient-to-br from-slate-800/30 to-slate-900/30\">\r\n      {/* Enhanced Transport Controls */}\r\n      <EnhancedTransportControls\r\n        isPlaying={playbackState}\r\n        onPlayPause={handlePlayPause}\r\n        onStop={handleStop}\r\n        onNext={handleNext}\r\n        onPrevious={handlePrevious}\r\n        currentTime={safeAudioEngine.currentTime}\r\n        totalTime={safeAudioEngine.duration}\r\n        zoom={zoom}\r\n        onZoomChange={setZoom}\r\n      />\r\n\r\n      {/* Professional Piano Roll */}\r\n      <div className=\"flex-1 p-4\">\r\n        <ProfessionalPianoRoll\r\n          notes={mockNotes}\r\n          isPlaying={playbackState}\r\n          currentTime={safeAudioEngine.currentTime}\r\n          zoom={zoom}\r\n          onNoteClick={(note) => {\r\n            console.log('Note clicked:', note);\r\n          }}\r\n          onNoteMove={(noteId, newStart, newNote) => {\r\n            console.log('Note moved:', noteId, newStart, newNote);\r\n          }}\r\n          onNoteResize={(noteId, newDuration) => {\r\n            console.log('Note resized:', noteId, newDuration);\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n","import * as React from \"react\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Input };\r\n","import { useState, useRef, useEffect } from \"react\";\r\nimport { Send, Brain, Sparkles, Loader2 } from \"lucide-react\";\r\nimport { HapticButton } from \"./HapticButton\";\r\nimport { Input } from \"./ui/input\";\r\nimport { ScrollArea } from \"./ui/scroll-area\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Card } from \"./ui/card\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  type: \"user\" | \"ai\";\r\n  content: string;\r\n  timestamp: Date;\r\n  isThinking?: boolean;\r\n  codeBlock?: string;\r\n}\r\n\r\nexport function AICompanion() {\r\n  const [messages, setMessages] = useState<Message[]>([\r\n    {\r\n      id: \"1\",\r\n      type: \"ai\",\r\n      content: \"Hello! I'm your AI music companion. I can help you analyze your music, generate chord progressions, and convert between music and code. What would you like to create today?\",\r\n      timestamp: new Date(),\r\n    }\r\n  ]);\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isThinking, setIsThinking] = useState(false);\r\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollAreaRef.current) {\r\n      const viewport = scrollAreaRef.current.querySelector('[data-slot=\"scroll-area-viewport\"]') as HTMLElement;\r\n      if (viewport) {\r\n        viewport.scrollTop = viewport.scrollHeight;\r\n      }\r\n    }\r\n  }, [messages]);\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputValue.trim()) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      type: \"user\",\r\n      content: inputValue,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputValue(\"\");\r\n    setIsThinking(true);\r\n\r\n    // Simulate AI thinking and response\r\n    setTimeout(() => {\r\n      setIsThinking(false);\r\n      \r\n      const aiResponses = [\r\n        {\r\n          content: \"I've analyzed your input! Here's a chord progression that would work well:\",\r\n          codeBlock: `// C Major Progression\r\nconst chords = [\r\n  { chord: \"C\", duration: 1 },\r\n  { chord: \"Am\", duration: 1 }, \r\n  { chord: \"F\", duration: 1 },\r\n  { chord: \"G\", duration: 1 }\r\n];`\r\n        },\r\n        {\r\n          content: \"I can help you create a melody pattern. Let me generate some MIDI data:\",\r\n          codeBlock: `// Melody Pattern\r\nconst melody = [\r\n  { note: \"C4\", time: 0, duration: 0.5 },\r\n  { note: \"E4\", time: 0.5, duration: 0.5 },\r\n  { note: \"G4\", time: 1.0, duration: 1.0 }\r\n];`\r\n        },\r\n        {\r\n          content: \"Based on your track, I recommend adding some harmonic movement. Here's what I suggest:\"\r\n        }\r\n      ];\r\n\r\n      const response = aiResponses[Math.floor(Math.random() * aiResponses.length)];\r\n      \r\n      const aiMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        type: \"ai\",\r\n        content: response.content,\r\n        timestamp: new Date(),\r\n        codeBlock: response.codeBlock,\r\n      };\r\n\r\n      setMessages(prev => [...prev, aiMessage]);\r\n      \r\n      // Haptic feedback for AI response\r\n      if (navigator.vibrate) {\r\n        navigator.vibrate([10, 50, 10]);\r\n      }\r\n    }, 2000);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-purple-800/30 bg-black/20\">\r\n        <div className=\"flex items-center gap-2 mb-2\">\r\n          <div className=\"w-6 h-6 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center\">\r\n            <Brain className=\"w-4 h-4 text-white\" />\r\n          </div>\r\n          <h3 className=\"font-medium text-purple-200\">AI Companion</h3>\r\n          <Badge variant=\"secondary\" className=\"bg-purple-600/20 text-purple-300 border-purple-500/30 ml-auto\">\r\n            <Sparkles className=\"w-3 h-3 mr-1\" />\r\n            Active\r\n          </Badge>\r\n        </div>\r\n        <p className=\"text-xs text-purple-300\">\r\n          Your personal music AI assistant\r\n        </p>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <ScrollArea ref={scrollAreaRef} className=\"flex-1 p-4\">\r\n        <div className=\"space-y-4\">\r\n          <AnimatePresence>\r\n            {messages.map((message) => (\r\n              <motion.div\r\n                key={message.id}\r\n                initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: -20, scale: 0.95 }}\r\n                transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n                className={`flex ${message.type === \"user\" ? \"justify-end\" : \"justify-start\"}`}\r\n              >\r\n                <motion.div\r\n                  whileHover={{ scale: 1.02 }}\r\n                  className={`max-w-[80%] rounded-lg p-3 shadow-lg ${\r\n                    message.type === \"user\"\r\n                      ? \"bg-gradient-to-r from-purple-600 to-pink-600 text-white\"\r\n                      : \"bg-gradient-to-r from-slate-700 to-slate-600 text-slate-100\"\r\n                  }`}\r\n                >\r\n                <p className=\"text-sm\">{message.content}</p>\r\n                \r\n                {message.codeBlock && (\r\n                  <Card className=\"mt-3 bg-black/50 border-purple-500/30\">\r\n                    <div className=\"p-3\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <div className=\"w-2 h-2 bg-red-400 rounded-full\" />\r\n                        <div className=\"w-2 h-2 bg-yellow-400 rounded-full\" />\r\n                        <div className=\"w-2 h-2 bg-green-400 rounded-full\" />\r\n                        <span className=\"text-xs text-purple-300 ml-2\">Generated Code</span>\r\n                      </div>\r\n                      <pre className=\"text-xs text-purple-200 font-mono overflow-x-auto\">\r\n                        {message.codeBlock}\r\n                      </pre>\r\n                    </div>\r\n                  </Card>\r\n                )}\r\n                \r\n                <p className=\"text-xs opacity-70 mt-2\">\r\n                  {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                </p>\r\n                </motion.div>\r\n              </motion.div>\r\n            ))}\r\n          </AnimatePresence>\r\n\r\n          {/* Enhanced Thinking Indicator */}\r\n          <AnimatePresence>\r\n            {isThinking && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                className=\"flex justify-start\"\r\n              >\r\n                <motion.div \r\n                  className=\"bg-gradient-to-r from-slate-700 to-slate-600 text-slate-100 rounded-lg p-3 max-w-[80%] shadow-lg\"\r\n                  animate={{ \r\n                    boxShadow: [\r\n                      \"0 0 0 0 rgba(168, 85, 247, 0.4)\",\r\n                      \"0 0 0 8px rgba(168, 85, 247, 0)\",\r\n                      \"0 0 0 0 rgba(168, 85, 247, 0)\"\r\n                    ]\r\n                  }}\r\n                  transition={{ duration: 1.5, repeat: Infinity }}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <motion.div\r\n                      animate={{ rotate: 360 }}\r\n                      transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                    >\r\n                      <Loader2 className=\"w-4 h-4 text-purple-400\" />\r\n                    </motion.div>\r\n                    <motion.span \r\n                      className=\"text-sm\"\r\n                      animate={{ opacity: [1, 0.5, 1] }}\r\n                      transition={{ duration: 1.5, repeat: Infinity }}\r\n                    >\r\n                      AI is thinking...\r\n                    </motion.span>\r\n                  </div>\r\n                </motion.div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n      </ScrollArea>\r\n\r\n      {/* Input */}\r\n      <div className=\"p-4 border-t border-purple-800/30 bg-black/20\">\r\n        <div className=\"flex gap-2\">\r\n          <Input\r\n            value={inputValue}\r\n            onChange={(e) => setInputValue(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Ask me about your music...\"\r\n            className=\"bg-black/30 border-purple-700/30 text-white placeholder:text-purple-300 focus:border-purple-500\"\r\n            disabled={isThinking}\r\n          />\r\n          <HapticButton\r\n            onClick={handleSendMessage}\r\n            disabled={!inputValue.trim() || isThinking}\r\n            size=\"sm\"\r\n            hapticType=\"medium\"\r\n            className=\"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <motion.div\r\n              animate={isThinking ? { rotate: 360 } : { rotate: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n            >\r\n              <Send className=\"w-4 h-4\" />\r\n            </motion.div>\r\n          </HapticButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { Copy, Download, Play, Lock } from \"lucide-react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Card } from \"./ui/card\";\r\nimport { ScrollArea } from \"./ui/scroll-area\";\r\nimport { Badge } from \"./ui/badge\";\r\n\r\ninterface CodeEditorProps {\r\n  locked?: boolean;\r\n}\r\n\r\nexport function CodeEditor({ locked = false }: CodeEditorProps) {\r\n  const [code] = useState(`// ChordCraft Generated Music Code\r\nconst musicTrack = {\r\n  title: \"Piano Melody\",\r\n  tempo: 120,\r\n  timeSignature: \"4/4\",\r\n  key: \"C Major\",\r\n  \r\n  tracks: [\r\n    {\r\n      instrument: \"piano\",\r\n      notes: [\r\n        { note: \"C4\", time: 0, duration: 0.5, velocity: 80 },\r\n        { note: \"E4\", time: 0.5, duration: 0.5, velocity: 75 },\r\n        { note: \"G4\", time: 1.0, duration: 1.0, velocity: 85 },\r\n        { note: \"C5\", time: 2.0, duration: 0.75, velocity: 90 }\r\n      ]\r\n    }\r\n  ],\r\n  \r\n  chordProgression: [\r\n    { chord: \"C\", time: 0, duration: 2 },\r\n    { chord: \"Am\", time: 2, duration: 2 },\r\n    { chord: \"F\", time: 4, duration: 2 },\r\n    { chord: \"G\", time: 6, duration: 2 }\r\n  ]\r\n};\r\n\r\n// Export as MIDI\r\nexport function generateMIDI() {\r\n  return musicTrack.tracks.map(track => ({\r\n    ...track,\r\n    midiData: convertToMIDI(track.notes)\r\n  }));\r\n}\r\n\r\n// Real-time playback\r\nexport function playTrack() {\r\n  const audioContext = new AudioContext();\r\n  musicTrack.tracks.forEach(track => {\r\n    track.notes.forEach(note => {\r\n      scheduleNote(audioContext, note);\r\n    });\r\n  });\r\n}`);\r\n\r\n  if (locked) {\r\n    return (\r\n      <Card className=\"h-full bg-gradient-to-br from-slate-800/30 to-slate-900/30 border-slate-600/30 relative overflow-hidden\">\r\n        <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-10\">\r\n          <div className=\"text-center\">\r\n            <Lock className=\"w-12 h-12 text-yellow-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-yellow-400 mb-2\">PRO Feature</h3>\r\n            <p className=\"text-sm text-yellow-200 mb-4 max-w-48\">\r\n              Unlock the code editor to view and modify AI-generated music code\r\n            </p>\r\n            <Button \r\n              size=\"sm\"\r\n              className=\"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700\"\r\n            >\r\n              Upgrade to PRO\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Blurred Preview */}\r\n        <div className=\"blur-sm opacity-50 p-4\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <h3 className=\"font-medium text-purple-200\">Music Code</h3>\r\n              <Badge variant=\"secondary\" className=\"bg-purple-600/20 text-purple-300\">\r\n                Generated\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n          \r\n          <pre className=\"text-xs text-purple-200 font-mono bg-black/30 p-3 rounded border border-purple-700/30 overflow-hidden\">\r\n            {code.substring(0, 200)}...\r\n          </pre>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"h-full bg-gradient-to-br from-slate-800/30 to-slate-900/30 border-slate-600/30\">\r\n      <div className=\"p-4 border-b border-purple-800/30\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <h3 className=\"font-medium text-purple-200\">Music Code</h3>\r\n            <Badge variant=\"secondary\" className=\"bg-purple-600/20 text-purple-300\">\r\n              Generated\r\n            </Badge>\r\n          </div>\r\n          \r\n          <div className=\"flex gap-2\">\r\n            <Button size=\"sm\" variant=\"ghost\" className=\"text-purple-400 hover:text-purple-300\">\r\n              <Copy className=\"w-3 h-3\" />\r\n            </Button>\r\n            <Button size=\"sm\" variant=\"ghost\" className=\"text-purple-400 hover:text-purple-300\">\r\n              <Download className=\"w-3 h-3\" />\r\n            </Button>\r\n            <Button size=\"sm\" variant=\"ghost\" className=\"text-green-400 hover:text-green-300\">\r\n              <Play className=\"w-3 h-3\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        \r\n        <p className=\"text-xs text-purple-300\">\r\n          AI-generated code from your musical input\r\n        </p>\r\n      </div>\r\n      \r\n      <ScrollArea className=\"h-[calc(100%-5rem)]\">\r\n        <div className=\"p-4\">\r\n          <pre className=\"text-xs text-purple-200 font-mono bg-black/30 p-3 rounded border border-purple-700/30 overflow-x-auto\">\r\n            {code}\r\n          </pre>\r\n        </div>\r\n      </ScrollArea>\r\n    </Card>\r\n  );\r\n}","import { BarChart3, TrendingUp, Music, Lock } from \"lucide-react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\r\nimport { Progress } from \"./ui/progress\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Button } from \"./ui/button\";\r\n\r\ninterface MusicAnalysisProps {\r\n  locked?: boolean;\r\n}\r\n\r\nexport function MusicAnalysis({ locked = false }: MusicAnalysisProps) {\r\n  const analysisData = {\r\n    key: \"C Major\",\r\n    tempo: 120,\r\n    timeSignature: \"4/4\",\r\n    harmonicComplexity: 75,\r\n    rhythmicVariety: 60,\r\n    melodicMovement: 85,\r\n    chordProgression: [\"C\", \"Am\", \"F\", \"G\"],\r\n    scales: [\"C Major\", \"A Natural Minor\"],\r\n    mood: \"Uplifting\",\r\n    genre: \"Pop/Rock\"\r\n  };\r\n\r\n  if (locked) {\r\n    return (\r\n      <Card className=\"h-full bg-gradient-to-br from-slate-800/30 to-slate-900/30 border-slate-600/30 relative overflow-hidden\">\r\n        <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-10\">\r\n          <div className=\"text-center\">\r\n            <Lock className=\"w-12 h-12 text-yellow-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-yellow-400 mb-2\">PRO Feature</h3>\r\n            <p className=\"text-sm text-yellow-200 mb-4 max-w-48\">\r\n              Get detailed harmonic analysis, chord progressions, and musical insights\r\n            </p>\r\n            <Button \r\n              size=\"sm\"\r\n              className=\"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700\"\r\n            >\r\n              Upgrade to PRO\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Blurred Preview */}\r\n        <div className=\"blur-sm opacity-50 p-4 space-y-4\">\r\n          <Card className=\"bg-black/30 border-purple-700/30\">\r\n            <CardHeader className=\"pb-3\">\r\n              <CardTitle className=\"text-sm text-purple-200\">Key Analysis</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-purple-400\">C Major</div>\r\n                <div className=\"text-xs text-purple-300\">Primary Key</div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          \r\n          <Card className=\"bg-black/30 border-purple-700/30\">\r\n            <CardHeader className=\"pb-3\">\r\n              <CardTitle className=\"text-sm text-purple-200\">Complexity Metrics</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              <div>\r\n                <div className=\"flex justify-between text-xs mb-1\">\r\n                  <span className=\"text-purple-300\">Harmonic</span>\r\n                  <span className=\"text-purple-400\">75%</span>\r\n                </div>\r\n                <Progress value={75} className=\"h-2\" />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card className=\"h-full bg-gradient-to-br from-slate-800/30 to-slate-900/30 border-slate-600/30\">\r\n      <CardHeader className=\"pb-3 border-b border-purple-800/30\">\r\n        <CardTitle className=\"flex items-center gap-2 text-purple-200\">\r\n          <BarChart3 className=\"w-5 h-5\" />\r\n          Music Analysis\r\n        </CardTitle>\r\n        <p className=\"text-xs text-purple-300\">\r\n          AI-powered harmonic and structural analysis\r\n        </p>\r\n      </CardHeader>\r\n      \r\n      <CardContent className=\"p-4 space-y-4 h-[calc(100%-5rem)] overflow-y-auto\">\r\n        {/* Key and Basic Info */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <Card className=\"bg-black/30 border-purple-700/30\">\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-sm text-purple-200\">Key Signature</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-xl font-bold text-purple-400\">{analysisData.key}</div>\r\n                <div className=\"text-xs text-purple-300\">Primary Key</div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          \r\n          <Card className=\"bg-black/30 border-purple-700/30\">\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-sm text-purple-200\">Tempo</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-xl font-bold text-green-400\">{analysisData.tempo}</div>\r\n                <div className=\"text-xs text-green-300\">BPM</div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Complexity Metrics */}\r\n        <Card className=\"bg-black/30 border-purple-700/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm text-purple-200 flex items-center gap-2\">\r\n              <TrendingUp className=\"w-4 h-4\" />\r\n              Complexity Metrics\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-3\">\r\n            <div>\r\n              <div className=\"flex justify-between text-xs mb-1\">\r\n                <span className=\"text-purple-300\">Harmonic Complexity</span>\r\n                <span className=\"text-purple-400\">{analysisData.harmonicComplexity}%</span>\r\n              </div>\r\n              <Progress value={analysisData.harmonicComplexity} className=\"h-2\" />\r\n            </div>\r\n            \r\n            <div>\r\n              <div className=\"flex justify-between text-xs mb-1\">\r\n                <span className=\"text-purple-300\">Rhythmic Variety</span>\r\n                <span className=\"text-purple-400\">{analysisData.rhythmicVariety}%</span>\r\n              </div>\r\n              <Progress value={analysisData.rhythmicVariety} className=\"h-2\" />\r\n            </div>\r\n            \r\n            <div>\r\n              <div className=\"flex justify-between text-xs mb-1\">\r\n                <span className=\"text-purple-300\">Melodic Movement</span>\r\n                <span className=\"text-purple-400\">{analysisData.melodicMovement}%</span>\r\n              </div>\r\n              <Progress value={analysisData.melodicMovement} className=\"h-2\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Chord Progression */}\r\n        <Card className=\"bg-black/30 border-purple-700/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm text-purple-200 flex items-center gap-2\">\r\n              <Music className=\"w-4 h-4\" />\r\n              Chord Progression\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n              {analysisData.chordProgression.map((chord, index) => (\r\n                <Badge \r\n                  key={index}\r\n                  variant=\"secondary\" \r\n                  className=\"bg-purple-600/20 text-purple-300 border-purple-500/30\"\r\n                >\r\n                  {chord}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n            <p className=\"text-xs text-purple-300 mt-2\">\r\n              I-vi-IV-V progression in {analysisData.key}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Musical Characteristics */}\r\n        <Card className=\"bg-black/30 border-purple-700/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm text-purple-200\">Musical Characteristics</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-2\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-purple-300\">Mood:</span>\r\n              <Badge variant=\"outline\" className=\"bg-pink-600/20 text-pink-300 border-pink-500/30\">\r\n                {analysisData.mood}\r\n              </Badge>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-purple-300\">Genre:</span>\r\n              <Badge variant=\"outline\" className=\"bg-blue-600/20 text-blue-300 border-blue-500/30\">\r\n                {analysisData.genre}\r\n              </Badge>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-xs text-purple-300\">Time Signature:</span>\r\n              <span className=\"text-xs text-purple-400\">{analysisData.timeSignature}</span>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Scales */}\r\n        <Card className=\"bg-black/30 border-purple-700/30\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm text-purple-200\">Detected Scales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-2\">\r\n              {analysisData.scales.map((scale, index) => (\r\n                <div key={index} className=\"flex items-center justify-between\">\r\n                  <span className=\"text-xs text-purple-300\">{scale}</span>\r\n                  <Badge \r\n                    variant=\"outline\" \r\n                    className=\"bg-green-600/20 text-green-300 border-green-500/30\"\r\n                  >\r\n                    {index === 0 ? 'Primary' : 'Secondary'}\r\n                  </Badge>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { Brain, Code, BarChart3, Lock } from \"lucide-react\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"./ui/tabs\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { AICompanion } from \"./AICompanion\";\r\nimport { CodeEditor } from \"./CodeEditor\";\r\nimport { MusicAnalysis } from \"./MusicAnalysis\";\r\n\r\nexport function RightPanel() {\r\n  const [activeTab, setActiveTab] = useState(\"ai-companion\");\r\n\r\n  return (\r\n    <div className=\"w-80 border-l border-purple-800/30 bg-black/10 backdrop-blur-sm\">\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"h-full flex flex-col\">\r\n        <TabsList className=\"grid w-full grid-cols-3 bg-black/20 border-b border-purple-800/30 rounded-none\">\r\n          <TabsTrigger \r\n            value=\"ai-companion\" \r\n            className=\"data-[state=active]:bg-purple-600/30 data-[state=active]:text-purple-200\"\r\n          >\r\n            <Brain className=\"w-4 h-4 mr-2\" />\r\n            AI Companion\r\n          </TabsTrigger>\r\n          <TabsTrigger \r\n            value=\"code-editor\"\r\n            className=\"data-[state=active]:bg-purple-600/30 data-[state=active]:text-purple-200\"\r\n          >\r\n            <Code className=\"w-4 h-4 mr-2\" />\r\n            Code\r\n            <Lock className=\"w-3 h-3 ml-1 text-yellow-400\" />\r\n          </TabsTrigger>\r\n          <TabsTrigger \r\n            value=\"analysis\"\r\n            className=\"data-[state=active]:bg-purple-600/30 data-[state=active]:text-purple-200\"\r\n          >\r\n            <BarChart3 className=\"w-4 h-4 mr-2\" />\r\n            Analysis\r\n            <Lock className=\"w-3 h-3 ml-1 text-yellow-400\" />\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <div className=\"flex-1 overflow-hidden\">\r\n          <TabsContent value=\"ai-companion\" className=\"h-full m-0\">\r\n            <AICompanion />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"code-editor\" className=\"h-full m-0\">\r\n            <div className=\"h-full flex flex-col\">\r\n              {/* PRO Feature Lock */}\r\n              <Card className=\"m-4 bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border-yellow-700/30\">\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-yellow-400\">\r\n                    <Lock className=\"w-5 h-5\" />\r\n                    PRO Feature\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm text-yellow-200 mb-3\">\r\n                    Unlock the code editor to view and modify the AI-generated music code.\r\n                  </p>\r\n                  <Badge variant=\"outline\" className=\"bg-yellow-400/10 text-yellow-400 border-yellow-500/30\">\r\n                    Upgrade to PRO\r\n                  </Badge>\r\n                </CardContent>\r\n              </Card>\r\n              \r\n              <div className=\"flex-1 mx-4 mb-4\">\r\n                <CodeEditor locked={true} />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"analysis\" className=\"h-full m-0\">\r\n            <div className=\"h-full flex flex-col\">\r\n              {/* PRO Feature Lock */}\r\n              <Card className=\"m-4 bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border-yellow-700/30\">\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-yellow-400\">\r\n                    <Lock className=\"w-5 h-5\" />\r\n                    PRO Feature\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm text-yellow-200 mb-3\">\r\n                    Get detailed music analysis including chord progressions, scales, and harmonic analysis.\r\n                  </p>\r\n                  <Badge variant=\"outline\" className=\"bg-yellow-400/10 text-yellow-400 border-yellow-500/30\">\r\n                    Upgrade to PRO\r\n                  </Badge>\r\n                </CardContent>\r\n              </Card>\r\n              \r\n              <div className=\"flex-1 mx-4 mb-4\">\r\n                <MusicAnalysis locked={true} />\r\n              </div>\r\n            </div>\r\n          </TabsContent>\r\n        </div>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { XIcon } from \"lucide-react\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Dialog({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Content>) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <DialogPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\">\r\n          <XIcon />\r\n          <span className=\"sr-only\">Close</span>\r\n        </DialogPrimitive.Close>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n}\r\n\r\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\r\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn(\"text-lg leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n};\r\n","import { Check, Crown, Zap, Brain, Code, BarChart3, X } from \"lucide-react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"./ui/dialog\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Card, CardContent } from \"./ui/card\";\r\nimport { Badge } from \"./ui/badge\";\r\n\r\ninterface SubscriptionModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function SubscriptionModal({ open, onOpenChange }: SubscriptionModalProps) {\r\n  const proFeatures = [\r\n    {\r\n      icon: <Code className=\"w-5 h-5\" />,\r\n      title: \"Music-to-Code Generation\",\r\n      description: \"Convert your music into editable code format\"\r\n    },\r\n    {\r\n      icon: <Brain className=\"w-5 h-5\" />,\r\n      title: \"Advanced AI Analysis\", \r\n      description: \"Deep harmonic and structural music analysis\"\r\n    },\r\n    {\r\n      icon: <BarChart3 className=\"w-5 h-5\" />,\r\n      title: \"Professional Analytics\",\r\n      description: \"Detailed chord progressions and scale analysis\"\r\n    },\r\n    {\r\n      icon: <Zap className=\"w-5 h-5\" />,\r\n      title: \"Real-time Code Preview\",\r\n      description: \"See generated code as you create music\"\r\n    }\r\n  ];\r\n\r\n  const handleUpgrade = () => {\r\n    // In a real app, this would integrate with a payment processor\r\n    console.log(\"Redirecting to payment...\");\r\n    onOpenChange(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border-purple-700/30 text-white\">\r\n        <DialogHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <DialogTitle className=\"flex items-center gap-3 text-2xl\">\r\n              <div className=\"w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-lg flex items-center justify-center\">\r\n                <Crown className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <span className=\"bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\">\r\n                ChordCraft PRO\r\n              </span>\r\n            </DialogTitle>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              onClick={() => onOpenChange(false)}\r\n              className=\"text-purple-300 hover:text-white\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n          <p className=\"text-purple-200 mt-2\">\r\n            Unlock the full power of AI-driven music production\r\n          </p>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6\">\r\n          {/* Features List */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg text-purple-200 mb-4\">\r\n              What's included in PRO:\r\n            </h3>\r\n            \r\n            {proFeatures.map((feature, index) => (\r\n              <div key={index} className=\"flex gap-3 p-3 rounded-lg bg-black/20 border border-purple-700/30\">\r\n                <div className=\"text-purple-400 mt-0.5\">\r\n                  {feature.icon}\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-medium text-purple-200 mb-1\">\r\n                    {feature.title}\r\n                  </h4>\r\n                  <p className=\"text-sm text-purple-300\">\r\n                    {feature.description}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Pricing Card */}\r\n          <div className=\"flex flex-col\">\r\n            <Card className=\"bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border-yellow-700/30 mb-4\">\r\n              <CardContent className=\"p-6 text-center\">\r\n                <Badge \r\n                  variant=\"outline\" \r\n                  className=\"bg-yellow-400/10 text-yellow-400 border-yellow-500/30 mb-4\"\r\n                >\r\n                  Most Popular\r\n                </Badge>\r\n                \r\n                <div className=\"mb-4\">\r\n                  <div className=\"text-4xl font-bold text-yellow-400 mb-2\">\r\n                    $19\r\n                    <span className=\"text-lg text-yellow-300\">/month</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-yellow-200\">\r\n                    Cancel anytime  7-day free trial\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2 mb-6\">\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-yellow-200\">\r\n                    <Check className=\"w-4 h-4 text-green-400\" />\r\n                    Unlimited AI generations\r\n                  </div>\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-yellow-200\">\r\n                    <Check className=\"w-4 h-4 text-green-400\" />\r\n                    Export to all formats\r\n                  </div>\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-yellow-200\">\r\n                    <Check className=\"w-4 h-4 text-green-400\" />\r\n                    Priority AI processing\r\n                  </div>\r\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-yellow-200\">\r\n                    <Check className=\"w-4 h-4 text-green-400\" />\r\n                    Advanced music analysis\r\n                  </div>\r\n                </div>\r\n\r\n                <Button \r\n                  onClick={handleUpgrade}\r\n                  className=\"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white font-medium\"\r\n                  size=\"lg\"\r\n                >\r\n                  Start 7-Day Free Trial\r\n                </Button>\r\n                \r\n                <p className=\"text-xs text-yellow-300 mt-3\">\r\n                  No commitment  Cancel before trial ends\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Testimonial */}\r\n            <div className=\"bg-black/20 border border-purple-700/30 rounded-lg p-4\">\r\n              <p className=\"text-sm text-purple-200 italic mb-2\">\r\n                \"ChordCraft PRO transformed my music production workflow. The AI analysis is incredible!\"\r\n              </p>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-6 h-6 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full\" />\r\n                <span className=\"text-xs text-purple-300\">Sarah M., Music Producer</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-6 pt-4 border-t border-purple-800/30\">\r\n          <p className=\"text-xs text-purple-300 text-center\">\r\n            By upgrading, you agree to our Terms of Service and Privacy Policy.\r\n            Secure payment processing by Stripe.\r\n          </p>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { useState, useEffect, useRef } from \"react\";\r\nimport { motion, AnimatePresence, useScroll, useTransform, useInView } from \"framer-motion\";\r\nimport { \r\n  Brain, \r\n  Music, \r\n  Zap, \r\n  Code, \r\n  ArrowRight, \r\n  Play, \r\n  Star, \r\n  Activity,\r\n  Headphones,\r\n  Sparkles,\r\n  Volume2,\r\n  Upload,\r\n  Download,\r\n  ChevronDown,\r\n  Quote\r\n} from \"lucide-react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Card, CardContent } from \"./ui/card\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { Progress } from \"./ui/progress\";\r\n\r\ninterface LandingPageProps {\r\n  onEnterStudio: () => void;\r\n}\r\n\r\nexport function LandingPage({ onEnterStudio }: LandingPageProps) {\r\n  const [currentFeature, setCurrentFeature] = useState(0);\r\n  const [isDAWPreviewVisible, setIsDAWPreviewVisible] = useState(false);\r\n  const heroRef = useRef<HTMLDivElement>(null);\r\n  const featuresRef = useRef<HTMLDivElement>(null);\r\n  const testimonialsRef = useRef<HTMLDivElement>(null);\r\n  const ctaFunnelRef = useRef<HTMLDivElement>(null);\r\n\r\n  const { scrollY } = useScroll();\r\n  const backgroundY = useTransform(scrollY, [0, 1000], [0, -300]);\r\n  const heroOpacity = useTransform(scrollY, [0, 400], [1, 0]);\r\n\r\n  const isHeroInView = useInView(heroRef);\r\n  const isFeaturesInView = useInView(featuresRef);\r\n  const isTestimonialsInView = useInView(testimonialsRef);\r\n  const isCTAInView = useInView(ctaFunnelRef);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentFeature(prev => (prev + 1) % features.length);\r\n    }, 4000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const features = [\r\n    {\r\n      id: 1,\r\n      title: \"AI-Powered Generation\",\r\n      description: \"Transform your musical ideas into professional-quality compositions using advanced AI\",\r\n      icon: <Brain className=\"w-8 h-8 text-electric-violet\" />,\r\n      neonIcon: (\r\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <rect width=\"64\" height=\"64\" rx=\"12\" fill=\"url(#brain-gradient)\"/>\r\n          <path d=\"M20 32C20 24.268 26.268 18 34 18s14 6.268 14 14-6.268 14-14 14-14-6.268-14-14z\" stroke=\"url(#brain-stroke)\" strokeWidth=\"2\"/>\r\n          <path d=\"M30 28l4 4 8-8\" stroke=\"url(#brain-accent)\" strokeWidth=\"2\"/>\r\n          <defs>\r\n            <linearGradient id=\"brain-gradient\" x1=\"32\" y1=\"0\" x2=\"32\" y2=\"64\">\r\n              <stop stopColor=\"#8b5cf6\"/>\r\n              <stop offset=\"1\" stopColor=\"#3f00ff\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"brain-stroke\" x1=\"32\" y1=\"18\" x2=\"32\" y2=\"46\">\r\n              <stop stopColor=\"#00c2ff\"/>\r\n              <stop offset=\"1\" stopColor=\"#80ff00\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"brain-accent\" x1=\"32\" y1=\"20\" x2=\"32\" y2=\"32\">\r\n              <stop stopColor=\"#ff00ff\"/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n      ),\r\n      microcopy: \"Create professional tracks in seconds\",\r\n      color: \"from-purple-600 to-violet-600\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Music-to-Code\",\r\n      description: \"Convert your music into editable code format for precise control and customization\",\r\n      icon: <Code className=\"w-8 h-8 text-neon-cyan\" />,\r\n      neonIcon: (\r\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <rect width=\"64\" height=\"64\" rx=\"12\" fill=\"url(#code-gradient)\"/>\r\n          <path d=\"M22 20C22 17.7909 23.7909 16 26 16H38C40.2091 16 42 17.7909 42 20V44C42 46.2091 40.2091 48 38 48H26C23.7909 48 22 46.2091 22 44V20Z\" stroke=\"url(#code-stroke)\" strokeWidth=\"3\"/>\r\n          <path d=\"M22 32H42\" stroke=\"url(#code-line1)\" strokeWidth=\"3\"/>\r\n          <path d=\"M32 16V48\" stroke=\"url(#code-line2)\" strokeWidth=\"3\"/>\r\n          <path d=\"M27 24L31 24\" stroke=\"url(#code-accent1)\" strokeWidth=\"2\"/>\r\n          <path d=\"M33 24L37 24\" stroke=\"url(#code-accent2)\" strokeWidth=\"2\"/>\r\n          <path d=\"M27 40L31 40\" stroke=\"url(#code-accent3)\" strokeWidth=\"2\"/>\r\n          <path d=\"M33 40L37 40\" stroke=\"url(#code-accent4)\" strokeWidth=\"2\"/>\r\n          <defs>\r\n            <linearGradient id=\"code-gradient\" x1=\"32\" y1=\"0\" x2=\"32\" y2=\"64\">\r\n              <stop stopColor=\"#3F00FF\"/>\r\n              <stop offset=\"1\" stopColor=\"#C800FF\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-stroke\" x1=\"32\" y1=\"16\" x2=\"32\" y2=\"48\">\r\n              <stop stopColor=\"#00C2FF\"/>\r\n              <stop offset=\"1\" stopColor=\"#80FF00\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-line1\">\r\n              <stop stopColor=\"#FF00FF\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-line2\" x1=\"32\" y1=\"16\" x2=\"32\" y2=\"48\">\r\n              <stop stopColor=\"#00FFFF\"/>\r\n              <stop offset=\"1\" stopColor=\"#FF00FF\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-accent1\">\r\n              <stop stopColor=\"#00FFC2\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-accent2\">\r\n              <stop stopColor=\"#00FFC2\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-accent3\">\r\n              <stop stopColor=\"#FFC200\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"code-accent4\">\r\n              <stop stopColor=\"#FFC200\"/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n      ),\r\n      microcopy: \"Edit music like code - precise & powerful\",\r\n      color: \"from-cyan-500 to-blue-600\"\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Professional DAW\",\r\n      description: \"Full-featured digital audio workstation with piano roll, timeline, and track management\",\r\n      icon: <Music className=\"w-8 h-8 text-neon-lime\" />,\r\n      neonIcon: (\r\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <rect width=\"64\" height=\"64\" rx=\"12\" fill=\"url(#daw-gradient)\"/>\r\n          <rect x=\"16\" y=\"20\" width=\"32\" height=\"24\" rx=\"4\" stroke=\"url(#daw-stroke)\" strokeWidth=\"2\"/>\r\n          <rect x=\"20\" y=\"26\" width=\"4\" height=\"12\" fill=\"url(#daw-bar1)\"/>\r\n          <rect x=\"28\" y=\"24\" width=\"4\" height=\"14\" fill=\"url(#daw-bar2)\"/>\r\n          <rect x=\"36\" y=\"28\" width=\"4\" height=\"10\" fill=\"url(#daw-bar3)\"/>\r\n          <circle cx=\"22\" cy=\"18\" r=\"2\" fill=\"url(#daw-dot)\" />\r\n          <circle cx=\"32\" cy=\"18\" r=\"2\" fill=\"url(#daw-dot)\" />\r\n          <circle cx=\"42\" cy=\"18\" r=\"2\" fill=\"url(#daw-dot)\" />\r\n          <defs>\r\n            <linearGradient id=\"daw-gradient\" x1=\"32\" y1=\"0\" x2=\"32\" y2=\"64\">\r\n              <stop stopColor=\"#22c55e\"/>\r\n              <stop offset=\"1\" stopColor=\"#15803d\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"daw-stroke\" x1=\"32\" y1=\"20\" x2=\"32\" y2=\"44\">\r\n              <stop stopColor=\"#80ff00\"/>\r\n              <stop offset=\"1\" stopColor=\"#00ff80\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"daw-bar1\" y1=\"26\" y2=\"38\">\r\n              <stop stopColor=\"#ff00ff\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"daw-bar2\" y1=\"24\" y2=\"38\">\r\n              <stop stopColor=\"#00c2ff\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"daw-bar3\" y1=\"28\" y2=\"38\">\r\n              <stop stopColor=\"#ffc200\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"daw-dot\">\r\n              <stop stopColor=\"#ffffff\"/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n      ),\r\n      microcopy: \"Industry-standard tools at your fingertips\",\r\n      color: \"from-green-500 to-emerald-600\"\r\n    },\r\n    {\r\n      id: 4,\r\n      title: \"Real-time Analysis\",\r\n      description: \"Get instant feedback on harmony, rhythm, and composition structure\",\r\n      icon: <Activity className=\"w-8 h-8 text-neon-yellow\" />,\r\n      neonIcon: (\r\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <rect width=\"64\" height=\"64\" rx=\"12\" fill=\"url(#analysis-gradient)\"/>\r\n          <path d=\"M12 32L20 20L28 36L36 24L44 40L52 32\" stroke=\"url(#analysis-wave)\" strokeWidth=\"3\" fill=\"none\"/>\r\n          <circle cx=\"20\" cy=\"20\" r=\"3\" fill=\"url(#analysis-dot1)\" />\r\n          <circle cx=\"28\" cy=\"36\" r=\"3\" fill=\"url(#analysis-dot2)\" />\r\n          <circle cx=\"36\" cy=\"24\" r=\"3\" fill=\"url(#analysis-dot3)\" />\r\n          <circle cx=\"44\" cy=\"40\" r=\"3\" fill=\"url(#analysis-dot4)\" />\r\n          <defs>\r\n            <linearGradient id=\"analysis-gradient\" x1=\"32\" y1=\"0\" x2=\"32\" y2=\"64\">\r\n              <stop stopColor=\"#f59e0b\"/>\r\n              <stop offset=\"1\" stopColor=\"#d97706\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"analysis-wave\" x1=\"12\" y1=\"32\" x2=\"52\" y2=\"32\">\r\n              <stop stopColor=\"#ffc200\"/>\r\n              <stop offset=\"0.5\" stopColor=\"#ff00ff\"/>\r\n              <stop offset=\"1\" stopColor=\"#00c2ff\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"analysis-dot1\">\r\n              <stop stopColor=\"#00ff80\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"analysis-dot2\">\r\n              <stop stopColor=\"#ff0080\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"analysis-dot3\">\r\n              <stop stopColor=\"#0080ff\"/>\r\n            </linearGradient>\r\n            <linearGradient id=\"analysis-dot4\">\r\n              <stop stopColor=\"#ff8000\"/>\r\n            </linearGradient>\r\n          </defs>\r\n        </svg>\r\n      ),\r\n      microcopy: \"AI-powered insights for better music\",\r\n      color: \"from-yellow-500 to-orange-500\"\r\n    }\r\n  ];\r\n\r\n  const testimonials = [\r\n    {\r\n      id: 1,\r\n      name: \"Alex Rivera\",\r\n      role: \"Music Producer\",\r\n      company: \"Neon Studios\",\r\n      quote: \"ChordCraft transformed my workflow. I can now generate complex chord progressions in seconds and fine-tune them with code-level precision.\",\r\n      avatar: \"AR\",\r\n      waveform: [20, 45, 30, 60, 25, 50, 35, 70, 40, 55]\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Sarah Chen\", \r\n      role: \"Composer\",\r\n      company: \"Indie Artist\",\r\n      quote: \"The Music-to-Code feature is revolutionary. It's like having a musical programming language that actually makes sense.\",\r\n      avatar: \"SC\",\r\n      waveform: [35, 60, 45, 75, 30, 65, 50, 80, 35, 70]\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Marcus Johnson\",\r\n      role: \"Beat Maker\",\r\n      company: \"Urban Beats Collective\",\r\n      quote: \"From concept to finished track in minutes. The AI understands my style and helps me push creative boundaries.\",\r\n      avatar: \"MJ\",\r\n      waveform: [25, 50, 40, 65, 35, 55, 45, 75, 30, 60]\r\n    }\r\n  ];\r\n\r\n  const ctaSteps = [\r\n    {\r\n      id: 1,\r\n      title: \"Try Studio\",\r\n      description: \"Experience the power of AI-driven music creation\",\r\n      icon: <Play className=\"w-6 h-6\" />,\r\n      action: \"Launch Studio\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Upload Audio\",\r\n      description: \"Import your existing tracks for analysis\",\r\n      icon: <Upload className=\"w-6 h-6\" />,\r\n      action: \"Upload Track\"\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Generate Code\",\r\n      description: \"Transform music into editable code format\",\r\n      icon: <Code className=\"w-6 h-6\" />,\r\n      action: \"Generate Code\"\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-slate-950 to-black overflow-x-hidden\">\r\n      {/* Animated Background */}\r\n      <motion.div \r\n        className=\"fixed inset-0 opacity-30\"\r\n        style={{ y: backgroundY }}\r\n      >\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(139,92,246,0.3),transparent_50%)]\" />\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(168,85,247,0.3),transparent_50%)]\" />\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(99,102,241,0.2),transparent_50%)]\" />\r\n      </motion.div>\r\n\r\n      {/* Hero Section */}\r\n      <section ref={heroRef} className=\"relative min-h-screen flex items-center justify-center px-6\">\r\n        <motion.div \r\n          className=\"max-w-6xl mx-auto text-center z-10\"\r\n          style={{ opacity: heroOpacity }}\r\n        >\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.2 }}\r\n            className=\"mb-8\"\r\n          >\r\n            <Badge className=\"mb-6 px-6 py-2 text-lg bg-gradient-to-r from-purple-600/20 to-violet-600/20 border-purple-500/30 hover:border-purple-400/50 transition-all duration-300\">\r\n              <Sparkles className=\"w-4 h-4 mr-2\" />\r\n              AI-Powered Music Production Platform\r\n            </Badge>\r\n          </motion.div>\r\n\r\n          <motion.h1 \r\n            className=\"text-6xl md:text-8xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-cyan-200 bg-clip-text text-transparent\"\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ duration: 1, delay: 0.4 }}\r\n          >\r\n            ChordCraft\r\n            <span className=\"block text-4xl md:text-6xl font-light italic text-purple-300\">Studio</span>\r\n          </motion.h1>\r\n\r\n          <motion.p \r\n            className=\"text-xl md:text-2xl text-slate-300 mb-8 max-w-3xl mx-auto leading-relaxed\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.6 }}\r\n          >\r\n            The first AI that truly understands both creativity and code.\r\n            Transform musical ideas into professional compositions with unprecedented control.\r\n          </motion.p>\r\n\r\n          <motion.div \r\n            className=\"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.8 }}\r\n          >\r\n            <Button\r\n              onClick={onEnterStudio}\r\n              size=\"lg\"\r\n              className=\"px-8 py-4 text-lg bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-500 hover:to-violet-500 shadow-lg hover:shadow-purple-500/25 transition-all duration-300 glow-electric-violet group\"\r\n            >\r\n              <motion.div \r\n                className=\"flex items-center\"\r\n                whileHover={{ scale: 1.05 }}\r\n              >\r\n                <Zap className=\"w-5 h-5 mr-2 group-hover:animate-pulse\" />\r\n                Generate Your First Track\r\n                <ArrowRight className=\"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform\" />\r\n              </motion.div>\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"lg\"\r\n              className=\"px-8 py-4 text-lg border-purple-500/30 hover:border-purple-400/50 hover:bg-purple-600/10 transition-all duration-300\"\r\n              onClick={() => setIsDAWPreviewVisible(true)}\r\n            >\r\n              <Play className=\"w-5 h-5 mr-2\" />\r\n              Watch Demo\r\n            </Button>\r\n          </motion.div>\r\n\r\n          {/* DAW Preview */}\r\n          <motion.div \r\n            className=\"relative max-w-4xl mx-auto\"\r\n            initial={{ opacity: 0, y: 40 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 1 }}\r\n          >\r\n            <Card className=\"bg-black/40 backdrop-blur-xl border-purple-500/30 shadow-2xl\">\r\n              <CardContent className=\"p-8\">\r\n                <div className=\"space-y-4\">\r\n                  {/* Fake DAW Interface */}\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n                      <div className=\"w-3 h-3 rounded-full bg-yellow-500\" />\r\n                      <div className=\"w-3 h-3 rounded-full bg-green-500\" />\r\n                    </div>\r\n                    <Badge className=\"bg-purple-600/20 text-purple-300\">\r\n                      ChordCraft Studio\r\n                    </Badge>\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-12 gap-2 h-32\">\r\n                    {Array.from({ length: 48 }).map((_, i) => (\r\n                      <motion.div\r\n                        key={i}\r\n                        className=\"bg-gradient-to-t from-purple-600/20 to-transparent rounded-sm\"\r\n                        animate={{ \r\n                          height: [10, Math.random() * 80 + 20, 10],\r\n                          opacity: [0.3, 1, 0.3]\r\n                        }}\r\n                        transition={{ \r\n                          duration: 2,\r\n                          delay: i * 0.1,\r\n                          repeat: Infinity,\r\n                          repeatType: \"reverse\"\r\n                        }}\r\n                        style={{ height: `${Math.random() * 80 + 20}%` }}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex justify-center\">\r\n                    <motion.div\r\n                      className=\"text-xs font-mono text-purple-300\"\r\n                      animate={{ opacity: [0.5, 1, 0.5] }}\r\n                      transition={{ duration: 2, repeat: Infinity }}\r\n                    >\r\n                       Analyzing harmonic structure... BPM: 128 | Key: C Major \r\n                    </motion.div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </motion.div>\r\n\r\n          {/* Scroll Indicator */}\r\n          <motion.div \r\n            className=\"absolute bottom-8 left-1/2 transform -translate-x-1/2\"\r\n            animate={{ y: [0, 10, 0] }}\r\n            transition={{ duration: 2, repeat: Infinity }}\r\n          >\r\n            <ChevronDown className=\"w-8 h-8 text-purple-400\" />\r\n          </motion.div>\r\n        </motion.div>\r\n      </section>\r\n\r\n      {/* Interactive Feature Carousel */}\r\n      <section ref={featuresRef} className=\"relative py-24 px-6\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <motion.div \r\n            className=\"text-center mb-16\"\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={isFeaturesInView ? { opacity: 1, y: 0 } : {}}\r\n            transition={{ duration: 0.8 }}\r\n          >\r\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent\">\r\n              Professional Tools. Creative Freedom.\r\n            </h2>\r\n            <p className=\"text-xl text-slate-300 max-w-2xl mx-auto\">\r\n              Everything you need to create, analyze, and perfect your music with AI-powered precision\r\n            </p>\r\n          </motion.div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            {features.map((feature, index) => (\r\n              <motion.div\r\n                key={feature.id}\r\n                initial={{ opacity: 0, y: 30 }}\r\n                animate={isFeaturesInView ? { opacity: 1, y: 0 } : {}}\r\n                transition={{ duration: 0.8, delay: index * 0.1 }}\r\n                onHoverStart={() => setCurrentFeature(index)}\r\n              >\r\n                <Card className=\"bg-gradient-to-br from-slate-900/50 to-slate-800/30 backdrop-blur-xl border-purple-500/30 hover:border-purple-400/50 transition-all duration-300 group overflow-hidden relative\">\r\n                  <CardContent className=\"p-6 text-center\">\r\n                    <motion.div \r\n                      className=\"w-16 h-16 mx-auto mb-4 relative\"\r\n                      whileHover={{ scale: 1.1 }}\r\n                      transition={{ duration: 0.3 }}\r\n                    >\r\n                      <motion.div\r\n                        animate={currentFeature === index ? {\r\n                          boxShadow: [\r\n                            \"0 0 20px rgba(139, 92, 246, 0.3)\",\r\n                            \"0 0 40px rgba(139, 92, 246, 0.6)\",\r\n                            \"0 0 20px rgba(139, 92, 246, 0.3)\"\r\n                          ]\r\n                        } : {}}\r\n                        transition={{ duration: 2, repeat: Infinity }}\r\n                      >\r\n                        {feature.neonIcon}\r\n                      </motion.div>\r\n                    </motion.div>\r\n                    \r\n                    <h3 className=\"text-xl font-semibold mb-2\">{feature.title}</h3>\r\n                    <p className=\"text-slate-400 text-sm mb-4\">{feature.description}</p>\r\n                    \r\n                    <AnimatePresence>\r\n                      {currentFeature === index && (\r\n                        <motion.div\r\n                          initial={{ opacity: 0, y: 10 }}\r\n                          animate={{ opacity: 1, y: 0 }}\r\n                          exit={{ opacity: 0, y: -10 }}\r\n                          className=\"text-xs text-purple-300 font-medium\"\r\n                        >\r\n                          {feature.microcopy}\r\n                        </motion.div>\r\n                      )}\r\n                    </AnimatePresence>\r\n                  </CardContent>\r\n                  \r\n                  {/* Hover Glow Effect */}\r\n                  <motion.div\r\n                    className=\"absolute inset-0 bg-gradient-to-r from-purple-600/0 via-purple-600/5 to-purple-600/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\r\n                  />\r\n                </Card>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Creator Testimonials */}\r\n      <section ref={testimonialsRef} className=\"relative py-24 px-6 bg-gradient-to-b from-transparent to-slate-950/50\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <motion.div \r\n            className=\"text-center mb-16\"\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={isTestimonialsInView ? { opacity: 1, y: 0 } : {}}\r\n            transition={{ duration: 0.8 }}\r\n          >\r\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-white to-cyan-200 bg-clip-text text-transparent\">\r\n              Loved by Creators Worldwide\r\n            </h2>\r\n            <p className=\"text-xl text-slate-300\">\r\n              Join thousands of artists pushing the boundaries of music creation\r\n            </p>\r\n          </motion.div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n            {testimonials.map((testimonial, index) => (\r\n              <motion.div\r\n                key={testimonial.id}\r\n                initial={{ opacity: 0, y: 30 }}\r\n                animate={isTestimonialsInView ? { opacity: 1, y: 0 } : {}}\r\n                transition={{ duration: 0.8, delay: index * 0.2 }}\r\n              >\r\n                <Card className=\"bg-gradient-to-br from-slate-900/50 to-slate-800/30 backdrop-blur-xl border-cyan-500/30 hover:border-cyan-400/50 transition-all duration-300 h-full relative overflow-hidden\">\r\n                  <CardContent className=\"p-6\">\r\n                    {/* Waveform Overlay */}\r\n                    <div className=\"absolute top-0 right-0 w-20 h-20 opacity-20\">\r\n                      <svg viewBox=\"0 0 80 80\" className=\"w-full h-full\">\r\n                        {testimonial.waveform.map((height, i) => (\r\n                          <motion.rect\r\n                            key={i}\r\n                            x={i * 8}\r\n                            y={80 - height}\r\n                            width=\"6\"\r\n                            height={height}\r\n                            fill=\"url(#waveform-gradient)\"\r\n                            animate={{\r\n                              height: [height, height + 10, height],\r\n                            }}\r\n                            transition={{\r\n                              duration: 2,\r\n                              delay: i * 0.1,\r\n                              repeat: Infinity,\r\n                              repeatType: \"reverse\"\r\n                            }}\r\n                          />\r\n                        ))}\r\n                        <defs>\r\n                          <linearGradient id=\"waveform-gradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                            <stop offset=\"0%\" stopColor=\"#00c2ff\" />\r\n                            <stop offset=\"100%\" stopColor=\"#80ff00\" />\r\n                          </linearGradient>\r\n                        </defs>\r\n                      </svg>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center mb-4\">\r\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold mr-4\">\r\n                        {testimonial.avatar}\r\n                      </div>\r\n                      <div>\r\n                        <h4 className=\"font-semibold text-white\">{testimonial.name}</h4>\r\n                        <p className=\"text-sm text-slate-400\">{testimonial.role}</p>\r\n                        <p className=\"text-xs text-cyan-400\">{testimonial.company}</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <Quote className=\"w-6 h-6 text-cyan-400 mb-3\" />\r\n                    <p className=\"text-slate-300 leading-relaxed italic\">\r\n                      \"{testimonial.quote}\"\r\n                    </p>\r\n\r\n                    <div className=\"flex items-center mt-4\">\r\n                      {[...Array(5)].map((_, i) => (\r\n                        <Star key={i} className=\"w-4 h-4 text-yellow-400 fill-current\" />\r\n                      ))}\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* CTA Funnel */}\r\n      <section ref={ctaFunnelRef} className=\"relative py-24 px-6\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <motion.div \r\n            className=\"text-center mb-16\"\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={isCTAInView ? { opacity: 1, y: 0 } : {}}\r\n            transition={{ duration: 0.8 }}\r\n          >\r\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-white to-lime-200 bg-clip-text text-transparent\">\r\n              Start Creating in 3 Steps\r\n            </h2>\r\n            <p className=\"text-xl text-slate-300\">\r\n              From idea to finished track in minutes\r\n            </p>\r\n          </motion.div>\r\n\r\n          <div className=\"space-y-8\">\r\n            {ctaSteps.map((step, index) => (\r\n              <motion.div\r\n                key={step.id}\r\n                initial={{ opacity: 0, x: index % 2 === 0 ? -50 : 50 }}\r\n                animate={isCTAInView ? { opacity: 1, x: 0 } : {}}\r\n                transition={{ duration: 0.8, delay: index * 0.2 }}\r\n                className={`flex items-center gap-8 ${index % 2 === 1 ? 'flex-row-reverse' : ''}`}\r\n              >\r\n                <div className=\"flex-1\">\r\n                  <Card className=\"bg-gradient-to-br from-slate-900/50 to-slate-800/30 backdrop-blur-xl border-lime-500/30 hover:border-lime-400/50 transition-all duration-300\">\r\n                    <CardContent className=\"p-8\">\r\n                      <div className=\"flex items-center mb-4\">\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-lime-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4\">\r\n                          {step.id}\r\n                        </div>\r\n                        <div>\r\n                          <h3 className=\"text-2xl font-semibold text-white mb-2\">{step.title}</h3>\r\n                          <p className=\"text-slate-300\">{step.description}</p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <Button\r\n                        size=\"lg\"\r\n                        className=\"bg-gradient-to-r from-lime-600 to-green-600 hover:from-lime-500 hover:to-green-500 shadow-lg hover:shadow-lime-500/25 transition-all duration-300\"\r\n                        onClick={step.id === 1 ? onEnterStudio : undefined}\r\n                      >\r\n                        {step.icon}\r\n                        <span className=\"ml-2\">{step.action}</span>\r\n                        <ArrowRight className=\"w-4 h-4 ml-2\" />\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {index < ctaSteps.length - 1 && (\r\n                  <motion.div \r\n                    className=\"flex-shrink-0\"\r\n                    animate={{ \r\n                      rotate: [0, 360],\r\n                      scale: [1, 1.1, 1]\r\n                    }}\r\n                    transition={{ \r\n                      duration: 3,\r\n                      repeat: Infinity,\r\n                      ease: \"linear\"\r\n                    }}\r\n                  >\r\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-purple-600 to-violet-600 rounded-full flex items-center justify-center\">\r\n                      <ArrowRight className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                  </motion.div>\r\n                )}\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Final CTA */}\r\n          <motion.div \r\n            className=\"text-center mt-16\"\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={isCTAInView ? { opacity: 1, scale: 1 } : {}}\r\n            transition={{ duration: 0.8, delay: 0.8 }}\r\n          >\r\n            <Card className=\"bg-gradient-to-br from-purple-900/30 to-violet-900/30 backdrop-blur-xl border-purple-500/50 max-w-md mx-auto\">\r\n              <CardContent className=\"p-8 text-center\">\r\n                <Sparkles className=\"w-12 h-12 text-purple-400 mx-auto mb-4\" />\r\n                <h3 className=\"text-2xl font-bold mb-4 text-white\">Ready to Create?</h3>\r\n                <p className=\"text-slate-300 mb-6\">\r\n                  Join the music production revolution today\r\n                </p>\r\n                <Button\r\n                  onClick={onEnterStudio}\r\n                  size=\"lg\"\r\n                  className=\"w-full bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-500 hover:to-violet-500 shadow-lg hover:shadow-purple-500/25 transition-all duration-300 glow-electric-violet\"\r\n                >\r\n                  <Zap className=\"w-5 h-5 mr-2\" />\r\n                  Launch ChordCraft Studio\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          </motion.div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Label };\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\";\r\n\r\nimport { cn } from \"./utils\";\r\n\r\nfunction Separator({\r\n  className,\r\n  orientation = \"horizontal\",\r\n  decorative = true,\r\n  ...props\r\n}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {\r\n  return (\r\n    <SeparatorPrimitive.Root\r\n      data-slot=\"separator-root\"\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Separator };\r\n","import { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAuth } from './Auth';\r\nimport { Button } from './ui/button';\r\nimport { Input } from './ui/input';\r\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\r\nimport { Label } from './ui/label';\r\nimport { Separator } from './ui/separator';\r\nimport { Github, Mail, ArrowLeft, Loader2 } from 'lucide-react';\r\n\r\ninterface LoginProps {\r\n  onBack: () => void;\r\n}\r\n\r\nexport function Login({ onBack }: LoginProps) {\r\n  const { signInWithEmail, signInWithOAuth } = useAuth();\r\n  const [isSignUp, setIsSignUp] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await signInWithEmail(email, password);\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await signInWithOAuth('google');\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGitHubSignIn = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await signInWithOAuth('github');\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-dark flex items-center justify-center p-4\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"w-full max-w-md\"\r\n      >\r\n        <Card className=\"bg-slate-800/50 border-slate-600/30 backdrop-blur-sm\">\r\n          <CardHeader className=\"text-center\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={onBack}\r\n              className=\"absolute left-4 top-4 text-slate-400 hover:text-slate-200\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Back\r\n            </Button>\r\n            <CardTitle className=\"text-2xl font-bold text-gold\">\r\n              {isSignUp ? 'Create Account' : 'Welcome Back'}\r\n            </CardTitle>\r\n            <p className=\"text-slate-400 mt-2\">\r\n              {isSignUp \r\n                ? 'Join ChordCraft and start creating music' \r\n                : 'Sign in to continue to your studio'\r\n              }\r\n            </p>\r\n          </CardHeader>\r\n\r\n          <CardContent className=\"space-y-6\">\r\n            {/* OAuth Buttons */}\r\n            <div className=\"space-y-3\">\r\n              <Button\r\n                onClick={handleGoogleSignIn}\r\n                disabled={loading}\r\n                className=\"w-full bg-white hover:bg-gray-100 text-gray-900\"\r\n              >\r\n                <Mail className=\"w-4 h-4 mr-2\" />\r\n                Continue with Google\r\n              </Button>\r\n              \r\n              <Button\r\n                onClick={handleGitHubSignIn}\r\n                disabled={loading}\r\n                className=\"w-full bg-gray-900 hover:bg-gray-800 text-white\"\r\n              >\r\n                <Github className=\"w-4 h-4 mr-2\" />\r\n                Continue with GitHub\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 flex items-center\">\r\n                <Separator className=\"w-full\" />\r\n              </div>\r\n              <div className=\"relative flex justify-center text-xs uppercase\">\r\n                <span className=\"bg-slate-800 px-2 text-slate-400\">Or continue with</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Email/Password Form */}\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\" className=\"text-slate-200\">Email</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"password\" className=\"text-slate-200\">Password</Label>\r\n                <Input\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter your password\"\r\n                  className=\"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {error && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: -10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className=\"text-red-400 text-sm text-center\"\r\n                >\r\n                  {error}\r\n                </motion.div>\r\n              )}\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\"\r\n              >\r\n                {loading ? (\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                ) : null}\r\n                {isSignUp ? 'Create Account' : 'Sign In'}\r\n              </Button>\r\n            </form>\r\n\r\n            <div className=\"text-center\">\r\n              <button\r\n                onClick={() => setIsSignUp(!isSignUp)}\r\n                className=\"text-slate-400 hover:text-slate-200 text-sm\"\r\n              >\r\n                {isSignUp \r\n                  ? 'Already have an account? Sign in' \r\n                  : \"Don't have an account? Sign up\"\r\n                }\r\n              </button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Menu, X } from \"lucide-react\";\r\nimport { HapticButton } from \"./HapticButton\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface ResponsiveLayoutProps {\r\n  header: React.ReactNode;\r\n  leftPanel: React.ReactNode;\r\n  mainPanel: React.ReactNode;\r\n  rightPanel: React.ReactNode;\r\n}\r\n\r\nexport function ResponsiveLayout({ header, leftPanel, mainPanel, rightPanel }: ResponsiveLayoutProps) {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [leftPanelOpen, setLeftPanelOpen] = useState(false);\r\n  const [rightPanelOpen, setRightPanelOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkDevice = () => {\r\n      setIsMobile(window.innerWidth < 1024);\r\n      // Auto-close panels on mobile when resizing\r\n      if (window.innerWidth >= 1024) {\r\n        setLeftPanelOpen(false);\r\n        setRightPanelOpen(false);\r\n      }\r\n    };\r\n\r\n    checkDevice();\r\n    window.addEventListener('resize', checkDevice);\r\n    return () => window.removeEventListener('resize', checkDevice);\r\n  }, []);\r\n\r\n  if (!isMobile) {\r\n    // Desktop layout - original design\r\n    return (\r\n      <div className=\"h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-hidden\">\r\n        {header}\r\n        <div className=\"flex h-[calc(100vh-4rem)]\">\r\n          {leftPanel}\r\n          {mainPanel}\r\n          {rightPanel}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Mobile layout - responsive design\r\n  return (\r\n    <div className=\"h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-hidden\">\r\n      {header}\r\n      \r\n      {/* Mobile Controls */}\r\n      <div className=\"flex items-center justify-between px-4 py-2 border-b border-purple-800/30 bg-black/20 backdrop-blur-sm lg:hidden\">\r\n        <HapticButton\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          hapticType=\"light\"\r\n          onClick={() => setLeftPanelOpen(!leftPanelOpen)}\r\n          className=\"text-purple-300 hover:text-white\"\r\n        >\r\n          <Menu className=\"w-4 h-4 mr-2\" />\r\n          Tracks\r\n        </HapticButton>\r\n        \r\n        <div className=\"text-sm text-purple-300 font-medium\">\r\n          ChordCraft Studio\r\n        </div>\r\n        \r\n        <HapticButton\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          hapticType=\"light\"\r\n          onClick={() => setRightPanelOpen(!rightPanelOpen)}\r\n          className=\"text-purple-300 hover:text-white\"\r\n        >\r\n          AI Assistant\r\n          <Menu className=\"w-4 h-4 ml-2\" />\r\n        </HapticButton>\r\n      </div>\r\n\r\n      <div className=\"flex h-[calc(100vh-8rem)] relative\">\r\n        {/* Main Panel - Always Visible on Mobile */}\r\n        <div className=\"flex-1\">\r\n          {mainPanel}\r\n        </div>\r\n\r\n        {/* Left Panel Overlay */}\r\n        <AnimatePresence>\r\n          {leftPanelOpen && (\r\n            <>\r\n              <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"absolute inset-0 bg-black/50 backdrop-blur-sm z-10\"\r\n                onClick={() => setLeftPanelOpen(false)}\r\n              />\r\n              <motion.div\r\n                initial={{ x: \"-100%\" }}\r\n                animate={{ x: 0 }}\r\n                exit={{ x: \"-100%\" }}\r\n                transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                className=\"absolute left-0 top-0 bottom-0 w-80 max-w-[85vw] z-20\"\r\n              >\r\n                <div className=\"h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border-r border-purple-700/30\">\r\n                  <div className=\"flex items-center justify-between p-4 border-b border-purple-800/30\">\r\n                    <h3 className=\"font-medium text-purple-200\">Track Manager</h3>\r\n                    <HapticButton\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      hapticType=\"light\"\r\n                      onClick={() => setLeftPanelOpen(false)}\r\n                      className=\"text-purple-300 hover:text-white\"\r\n                    >\r\n                      <X className=\"w-4 h-4\" />\r\n                    </HapticButton>\r\n                  </div>\r\n                  <div className=\"h-[calc(100%-4rem)]\">\r\n                    {leftPanel}\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            </>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        {/* Right Panel Overlay */}\r\n        <AnimatePresence>\r\n          {rightPanelOpen && (\r\n            <>\r\n              <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"absolute inset-0 bg-black/50 backdrop-blur-sm z-10\"\r\n                onClick={() => setRightPanelOpen(false)}\r\n              />\r\n              <motion.div\r\n                initial={{ x: \"100%\" }}\r\n                animate={{ x: 0 }}\r\n                exit={{ x: \"100%\" }}\r\n                transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                className=\"absolute right-0 top-0 bottom-0 w-80 max-w-[85vw] z-20\"\r\n              >\r\n                <div className=\"h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 border-l border-purple-700/30\">\r\n                  <div className=\"flex items-center justify-between p-4 border-b border-purple-800/30\">\r\n                    <h3 className=\"font-medium text-purple-200\">AI Assistant</h3>\r\n                    <HapticButton\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      hapticType=\"light\"\r\n                      onClick={() => setRightPanelOpen(false)}\r\n                      className=\"text-purple-300 hover:text-white\"\r\n                    >\r\n                      <X className=\"w-4 h-4\" />\r\n                    </HapticButton>\r\n                  </div>\r\n                  <div className=\"h-[calc(100%-4rem)]\">\r\n                    {rightPanel}\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            </>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState } from \"react\";\r\nimport { AuthProvider, useAuth } from \"./components/Auth\";\r\nimport { AudioEngineProvider } from \"./services/AudioEngine\";\r\nimport { Header } from \"./components/Header\";\r\nimport { LeftPanel } from \"./components/LeftPanel\";\r\nimport { MainPanel } from \"./components/MainPanel\";\r\nimport { RightPanel } from \"./components/RightPanel\";\r\nimport { SubscriptionModal } from \"./components/SubscriptionModal\";\r\nimport { LandingPage } from \"./components/LandingPage\";\r\nimport { Login } from \"./components/Login\";\r\nimport { ResponsiveLayout } from \"./components/ResponsiveLayout\";\r\nimport { Analytics } from \"@vercel/analytics/react\";\r\n\r\ninterface Track {\r\n  id: string;\r\n  name: string;\r\n  type: \"audio\" | \"midi\";\r\n  duration: string;\r\n  volume: number;\r\n  muted: boolean;\r\n  solo: boolean;\r\n  generatedCode?: string;\r\n}\r\n\r\nfunction AppContent() {\r\n  const { user, loading } = useAuth();\r\n  const [currentView, setCurrentView] = useState<\"landing\" | \"login\" | \"studio\">(\"landing\");\r\n  const [showSubscriptionModal, setShowSubscriptionModal] = useState(false);\r\n  const [currentTrack, setCurrentTrack] = useState<Track | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  // Debug logging\r\n  console.log('AppContent render:', { user, loading, currentView });\r\n\r\n  // Show loading spinner while checking auth\r\n  if (loading) {\r\n    console.log('Showing loading spinner');\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-dark flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If user is authenticated, show studio\r\n  if (user) {\r\n    return (\r\n      <>\r\n        <ResponsiveLayout\r\n          header={<Header onShowSubscription={() => setShowSubscriptionModal(true)} />}\r\n          leftPanel={\r\n            <LeftPanel \r\n              currentTrack={currentTrack}\r\n              setCurrentTrack={setCurrentTrack}\r\n              isPlaying={isPlaying}\r\n              setIsPlaying={setIsPlaying}\r\n            />\r\n          }\r\n          mainPanel={\r\n            <MainPanel \r\n              currentTrack={currentTrack}\r\n              isPlaying={isPlaying}\r\n            />\r\n          }\r\n          rightPanel={<RightPanel />}\r\n        />\r\n\r\n        {/* Subscription Modal */}\r\n        <SubscriptionModal \r\n          open={showSubscriptionModal}\r\n          onOpenChange={setShowSubscriptionModal}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Show login page\r\n  if (currentView === \"login\") {\r\n    return <Login onBack={() => setCurrentView(\"landing\")} />;\r\n  }\r\n\r\n  // Show landing page\r\n  return <LandingPage onEnterStudio={() => setCurrentView(\"login\")} />;\r\n}\r\n\r\nexport default function App() {\r\n  console.log('App component rendering');\r\n  \r\n  return (\r\n    <AuthProvider>\r\n      <AudioEngineProvider>\r\n        <AppContent />\r\n        <Analytics />\r\n      </AudioEngineProvider>\r\n    </AuthProvider>\r\n  );\r\n}","import { createRoot } from \"react-dom/client\";\r\nimport App from \"./App.tsx\";\r\nimport \"./index.css\";\r\n\r\ncreateRoot(document.getElementById(\"root\")!).render(<App />);"],"file":"assets/index-S22JMfT2.js"}